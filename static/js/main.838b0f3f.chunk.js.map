{"version":3,"sources":["farmBuckEnglish.jpg","farmBuckSpanish.jpg","bucktemplateprintpage.jpg","components/constants.jsx","components/LogInActivity.jsx","components/CreateAccount.jsx","components/AccountRecovery.jsx","components/BuckSetListItem.jsx","components/ViewBucks.jsx","components/CreateBucks.jsx","components/FormSuccess.jsx","components/BucksLanding.jsx","components/Scan.jsx","components/Account.jsx","components/AccountList.jsx","components/ManageAccount.jsx","components/FarmerPayout.jsx","components/LineGraph.jsx","components/BarGraph.jsx","components/Dashboard.jsx","components/MainView.jsx","components/Barrier.jsx","App.js","serviceWorker.js","index.js"],"names":["module","exports","__webpack_require__","p","constants","routes","barrier","createAccount","accountRecovery","base","dash","viewData","createBucks","bucksLanding","viewBucks","scan","manageAccount","editAccount","formSuccess","farmerPayout","variables","colors","bodyBG","LogInActivity","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","handleOnUpdate","e","_ref","width","setState","state","email","pw","role","errorMessage","undefined","loading","_this2","authUnsub","firebase","auth","onAuthStateChanged","user","getIdTokenResult","then","idTokenResult","console","log","claims","history","push","evt","_this3","preventDefault","signInWithEmailAndPassword","catch","err","message","_this4","_this$state","colWidth","Responsive","onlyTablet","minWidth","react_default","a","createElement","as","Grid","fireOnMount","onUpdate","centered","middle","columns","Column","verticalAlign","textAlign","Message","attached","header","content","className","Form","onSubmit","handleSignIn","error","Input","required","id","label","placeholder","type","value","onInput","target","Button","Divider","hidden","Link","to","info","Icon","name","React","Component","CreateAccount","firstName","lastName","org","pw_confirm","toLowerCase","displayName","length","createUserWithEmailAndPassword","response","database","ref","concat","uid","set","lastPayoutDate","vouchersList","approved","orgOptions","key","text","handleCreateAccount","htmlFor","Select","options","onChange","data","readOnly","AccountRecovery","successMessage","currentUser","sendPasswordResetEmail","handlePasswordReset","warning","BuckSetListItem","showView","viewModalOpen","open","close","deleteBuckSet","title","remove","deleteModalOpen","viewBuckSet","_this$props$data","createdBy","Card","fluid","Content","Header","Meta","extra","Modal","trigger","primary","size","onClose","closeIcon","icon","Confirm","cancelButton","confirmButton","onCancel","onConfirm","ViewBucks","firebaseBuckSet","buckSetsRef","orderByChild","on","snapshot","val","filter","el","subtitle","Container","Group","map","element","BuckSetListItem_BuckSetListItem","pdfMake","vfs","pdfFonts","orgID","Foodbank","dove","vcc","seniorcenter","interfaith","vashonhousehold","lacomunidad","vyfs","CreateBucks","validateFormData","asyncToGenerator","regenerator_default","mark","_callee","sum","buckSetName","isTrue","wrap","_context","prev","next","abrupt","equalTo","once","forEach","childSnapshot","stop","_x","apply","arguments","handleSubmit","_ref2","_callee2","event","_this$props","doveCount","vyfsCount","lacomunidadCount","vashonhouseholdCount","ids","promise1","promise2","promise3","promise4","_context2","sent","child","update","createdOn","Date","username","expirationDate","foodbankCount","communitycareCount","seniorcenterCount","interfaithCount","communitymealsCount","vyfslatinxCount","vyfsfamilyplaceCount","postVoucherData","Promise","all","doesPass","toDataURL","bgImgSP","dataUrlSP","bgImg","dataUrl","documentDefinition","createPDF","JSON","stringify","createPdf","download","complete","toggleShowCreateBucks","functions","_x2","hasError","src","callback","outputFormat","img","Image","crossOrigin","onload","dataURL","canvas","document","ctx","getContext","height","naturalHeight","naturalWidth","drawImage","dataURLSP","year","Year","count","i","pOrgID","partnerOrg","code","qr","exp","absolutePosition","x","y","fontSize","color","bold","yearText","split","coupon","image","fit","pageBreak","generateSpanishPage","pageMargins","doc","spURL","end","organization","updates","voucherData","newVoucherKey","defineProperty","Segment","raised","inline","transparent","handleChange","Number","min","Statistic","widths","Value","Label","FormSuccess","background","pageSize","margin","style","paddingTop","paddingRight","paddingLeft","Subheader","onClick","BucksLanding","showCreateBucks","bind","assertThisInitialized","newState","_event","stackable","Row","CreateBucks_CreateBucks","FormSuccess_FormSuccess","ViewBucks_ViewBucks","Scan","handleScan","isValid","exists","populateUserData","populateVisData","scanState","invalidScan","delayedStopLoading","setTimeout","redeemDate","vizRef","userId","voucherRef","userRef","snapshotInner","getTime","redeemedOn","handedOutDate","handedOutOn","showResponseMessage","positive","negative","handleError","legacyMode","qrCode","str","test","scanner","lib_default","delay","onError","onScan","basic","Dimmer","active","inverted","Loader","maxWidth","SegmentGroup","Account","httpsCallable","deleteUser","acctSnapshot","result","acctRef","acct","changeRole","appEl","Table","Cell","onlyComputer","collapsing","compact","handleApprove","handlePurge","AccountList","accountSnapshot","nextProps","accountRef","off","unlisten","indeterminate","accts","Account_Account","selectable","HeaderCell","Body","ManageAccount","date_added","AccountList_AccountList","FarmerPayout","listenForUpdates","_snapshot","loadPayoutRecords","farmerList","toString","totalBucks","bucksNotPaid","keys","voucher","farmerUid","farm","completePayout","dateObj","prettyDate","getMonth","getDate","getFullYear","paidUp","singleLine","TableRow","labelPosition","pointing","LineGraph","_useState","useState","_useState2","slicedToArray","charData","setCharData","_useState3","_useState4","setRole","_useState5","_useState6","isLoaded","setIsLoaded","useEffect","nivo_line_esm","scheme","xScale","format","precision","xFormat","curve","yScale","stacked","axisLeft","orient","tickSize","tickPadding","tickRotation","legend","legendOffset","legendPosition","axisBottom","tickValues","animate","top","right","bottom","left","enableSlices","lineWidth","pointSize","pointColor","pointBorderWidth","pointBorderColor","from","pointLabel","pointLabelYOffset","useMesh","legends","anchor","direction","justify","translateX","translateY","itemsSpacing","itemDirection","itemWidth","itemHeight","itemOpacity","symbolSize","symbolShape","symbolBorderColor","effects","itemBackground","BarGraph","nivo_bar_esm","indexBy","padding","groupMode","motionStiffness","motionDamping","borderColor","modifiers","axisTop","axisRight","dataFrom","labelSkipWidth","labelSkipHeight","labelTextColor","Dashboard","_useState7","_useState8","totalRedeemed","setTotalRedeemed","_useState9","_useState10","_useState11","_useState12","_useState13","_useState14","orderByValue","firebaseDataArray","scanDay","toISOString","index","findIndex","item","handleFarmer","redCount","orgJSON","scanType","startDay","array","dates","childKey","sort","b","_loop","time","newData","toConsumableArray","arr","len","enoughData","padded","Dropdown","defaultValue","MainView","handleSignOut","signOut","ui","nav","isAdmin","farmerNav","Menu","Item","location","pathname","cworkerNav","adminNav","bookkeeperNav","farmerUI","Route","exact","path","render","Scan_Scan","cworkerUI","adminUI","BucksLanding_BucksLanding","component","bookkeeperUI","FarmerPayout_FarmerPayout","clearing","floated","secondary","position","HashRouter","Switch","Barrier","onIdTokenChanged","App","isLocalhost","Boolean","window","hostname","match","registerValidSW","swUrl","config","navigator","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","onSuccess","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","ReactDOM","src_App_0","getElementById","URL","process","href","origin","addEventListener","fetch","contentType","headers","get","status","indexOf","ready","unregister","reload","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.838b0f3f.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/farmBuckEnglish.8e8b37b7.jpg\";","module.exports = __webpack_public_path__ + \"static/media/farmBuckSpanish.c7d241e2.jpg\";","module.exports = __webpack_public_path__ + \"static/media/bucktemplateprintpage.97cf9a86.jpg\";","export default {\n  routes: {\n    barrier: \"/barrier\",\n    createAccount: \"/signup\",\n    accountRecovery: \"/recover\",\n    base: \"/\",\n    dash: {\n      base: \"/dash\",\n      viewData: \"/dash/ViewData\",\n      createBucks: \"/dash/CreateBucks\",\n      bucksLanding: \"/dash/BucksLanding\",\n      viewBucks: \"/dash/ViewBucks\",\n      scan: \"/dash/Scan\",\n      manageAccount: \"/dash/manage\",\n      editAccount: \"/dash/manage/edit\",\n      formSuccess: \"/dash/formSuccess\",\n      farmerPayout: \"/dash/farmerPayout\"\n    }\n  },\n  variables: {\n    colors: {\n      bodyBG: \"#EFF0F3\"\n    }\n  }\n};\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport constants from \"./constants\";\nimport firebase from \"firebase/app\";\nimport \"firebase/auth\";\nimport \"firebase/database\";\nimport {\n  Message,\n  Form,\n  Button,\n  Icon,\n  Grid,\n  Divider,\n  Responsive\n} from \"semantic-ui-react\";\n\nexport default class LogInActivity extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      email: \"\",\n      pw: \"\",\n      role: \"\",\n      errorMessage: undefined,\n      loading: false\n    };\n  }\n\n  componentDidMount() {\n    //listen for auth change\n    this.authUnsub = firebase.auth().onAuthStateChanged(user => {\n      if (user) {\n        user.getIdTokenResult().then(idTokenResult => {\n          console.log(idTokenResult.claims.role);\n          if (idTokenResult.claims.role) {\n            //push them on to the dashboard\n            this.props.history.push(constants.routes.dash.base);\n          } else {\n            //push them to the barrier page\n            this.props.history.push(constants.routes.barrier);\n          }\n        });\n      }\n    });\n  }\n\n  componentWillUnmount() {\n    this.authUnsub();\n  }\n\n  handleSignIn(evt) {\n    evt.preventDefault();\n\n    this.setState({\n      loading: true\n    });\n\n    firebase\n      .auth()\n      .signInWithEmailAndPassword(this.state.email, this.state.pw)\n      .catch(err =>\n        this.setState({\n          errorMessage: err.message,\n          loading: false\n        })\n      );\n  }\n\n  handleOnUpdate = (e, { width }) => this.setState({ width });\n\n  render() {\n    const { loading, errorMessage } = this.state;\n    const { width } = this.state;\n    const colWidth = width >= Responsive.onlyTablet.minWidth ? \"6\" : \"12\";\n\n    return (\n      <Responsive\n        as={Grid}\n        fireOnMount\n        onUpdate={this.handleOnUpdate}\n        centered=\"true\"\n        middle\n        columns={1}\n      >\n        <Grid.Column width={colWidth} verticalAlign=\"middle\" textAlign=\"left\" >\n          <Message\n            attached=\"top\"\n            header=\"Welcome to our site!\"\n            content=\"Sign in to access your account\"\n            className=\"messageHeader loginIllustrations\"\n          />\n\n          <Form\n            className=\"attached fluid segment messageBody\"\n            onSubmit={evt => this.handleSignIn(evt)}\n            error={errorMessage}\n            loading={loading}\n          >\n            <Message error header={errorMessage} content={\"not logged in\"} />\n\n            <Form.Input\n              required\n              id=\"email\"\n              label=\"Email\"\n              placeholder=\"Email\"\n              type=\"email\"\n              value={this.state.email}\n              onInput={evt => this.setState({ email: evt.target.value })}\n              className=\"LogInActivity-Input-Style\"\n            />\n\n            <Form.Input\n              required\n              id=\"pw\"\n              label=\"Password\"\n              placeholder=\"Password\"\n              type=\"password\"\n              value={this.state.pw}\n              onInput={evt => this.setState({ pw: evt.target.value })}\n              className=\"LogInActivity-Input-Style\"\n            />\n\n            <Button type=\"submit\">Sign In</Button>\n            <Divider hidden />\n            <Link to={constants.routes.accountRecovery}>Forgot password?</Link>\n          </Form>\n\n          <Message attached=\"bottom\" className=\"messageFooter\" info>\n            <Icon name=\"help\" />\n            Don't have an account? &nbsp;\n            <Link to={constants.routes.createAccount}>Sign Up</Link>\n            &nbsp;instead.\n          </Message>\n        </Grid.Column>\n      </Responsive>\n    );\n  }\n}\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport constants from \"./constants\";\nimport firebase from \"firebase/app\";\nimport \"firebase/auth\";\nimport \"firebase/database\";\nimport { Message, Form, Button, Icon, Grid, Responsive } from \"semantic-ui-react\";\n\nexport default class CreateAccount extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      firstName: \"\",\n      lastName: \"\",\n      role: \"\",\n      org: \"\",\n      email: \"\",\n      pw: \"\",\n      pw_confirm: \"\",\n      errorMessage: undefined\n    };\n  }\n\n  componentDidMount() {\n    //listen for auth change\n    this.authUnsub = firebase.auth().onAuthStateChanged(user => {\n      if (user) {\n        user.getIdTokenResult().then(idTokenResult => {\n          console.log(idTokenResult.claims.role)\n          if(idTokenResult.claims.role) {\n              //push them on to the dashboard\n              this.props.history.push(constants.routes.dash.base);\n          } else {\n              //push them to the barrier page\n              this.props.history.push(constants.routes.barrier);\n          }\n        });\n      }\n    });\n  }\n\n  handleCreateAccount(evt) {\n    evt.preventDefault();\n\n    this.setState({\n      loading: true\n    });\n\n    // handle case for bookkeeper and admin org\n    if(this.state.role.toLowerCase() === 'admin' || this.state.role.toLowerCase() === 'bookkeeper') {\n      this.setState({\n        org: \"fap\"\n      })\n    }\n\n    if (this.state.pw !== this.state.pw_confirm) {\n      this.setState({\n        errorMessage: \"Passwords do not match\",\n        loading: false\n      });\n    } else if (this.state.displayName === \"\") {\n      this.setState({\n        errorMessage: \"Enter Display Name\",\n        loading: false\n      });\n      return;\n    } else if (this.state.pw.length < 6) {\n      this.setState({\n        errorMessage: \"Password must be at least six characters\",\n        loading: false\n      });\n      return;\n    } else {\n      // auth.token.role == 'admin'\n      firebase\n        .auth()\n        .createUserWithEmailAndPassword(this.state.email, this.state.pw)\n        .then(response => {\n          try {\n            this.setState({\n              loading: true,\n              errorMessage: \"\"\n            });\n            console.log('response = ', response)\n            return firebase\n              .database()\n              .ref(`/users/${response.user.uid}`)\n              .set({\n                firstName: this.state.firstName,\n                lastName: this.state.lastName,\n                email: this.state.email,\n                role: this.state.role,\n                lastPayoutDate: \"N/A\",\n                org: this.state.org,\n                vouchersList: [], // added on 5/20 to avoid accessing undefined later\n                approved: false  // TODO: Change this?\n              });\n          } catch (err) {\n            console.log('err on write to db = ', err)\n            return this.setState({\n              loading: false,\n              errorMessage: err.message\n            });\n          }\n        })\n        .catch(err => {\n          console.log('err on write to db = ', err)\n          this.setState({\n            loading: false,\n            errorMessage: err.message\n          })\n        }\n      );\n    }\n  }\n\n  handleOnUpdate = (e, { width }) => this.setState({ width })\n\n  render() {\n    const roleOptions = [\n      { key: \"f\", text: \"Farmer\", value: \"Farmer\" },\n      { key: \"c\", text: \"Caseworker\", value: \"Caseworker\" },\n      { key: \"a\", text: \"Admin\", value: \"Admin\" },\n      { key: \"b\", text: \"Bookkeeper\", value: \"Bookkeeper\"}\n    ];\n\n    const orgOptions = [\n      { key: \"f\", text: \"Vashon Community Food Bank\", value: \"foodbank\" },\n      { key: \"d\", text: \"The Dove Project\", value: \"dove\" },\n      { key: \"c\", text: \"Vashon Community Care\", value: \"vcc\" },\n      { key: \"s\", text: \"Vashon Senior Center\", value: \"seniorcenter\" },\n      { key: \"i\", text: \"Interfaith Council to Prevent Homelessness\", value: \"interfaith\"},\n      { key: \"m\", text: \"Community Meals\", value: \"communitymeals\"},\n      { key: \"h\", text: \"Vashon Household\", value: \"vashonhousehold\" },\n      { key: \"l\", text: \"La Comunidad & ECEAP\", value: \"lacomunidad\" },\n      { key: \"y\", text: \"VYFS\", value: \"vyfs\" },\n      { key: \"x\", text: \"VYFS: Latinx\", value: \"vyfslatinx\" },\n      { key: \"p\", text: \"VYFS: Family Place\", value: \"vyfsfamily\" }\n    ];\n\n    const { loading, errorMessage, role } = this.state;\n    const { width } = this.state\n    const colWidth = width >= Responsive.onlyTablet.minWidth ? '6' : '12'\n\n    return (\n      <Responsive as={Grid} fireOnMount onUpdate={this.handleOnUpdate} centered=\"true\" middle columns={1}>\n        <Grid.Column width={colWidth} verticalAlign=\"middle\" textAlign=\"left\" className=\"mt100 mb100\">\n          <Message\n            attached\n            header=\"Create an Account\"\n            content=\"Provide some basic information to get started!\"\n            className=\"messageHeader loginIllustrations\"\n          />\n\n          <Form\n            className=\"attached fluid segment messageBody\"\n            onSubmit={evt => this.handleCreateAccount(evt)}\n            error={errorMessage}\n            loading={loading}\n          >\n            <Message\n              error\n              header={\"Account not created\"}\n              content={errorMessage}\n            />\n\n            <Form.Input\n              required\n              label=\"First Name\"\n              htmlFor=\"firstName\"\n              id=\"firstName\"\n              type=\"text\"\n              className=\"form-control\"\n              value={this.state.firstName}\n              onInput={evt => this.setState({ firstName: evt.target.value })}\n            />\n\n            <Form.Input\n              required\n              label=\"Last Name\"\n              htmlFor=\"lastName\"\n              id=\"lastName\"\n              type=\"text\"\n              className=\"form-control\"\n              value={this.state.lastName}\n              onInput={evt => this.setState({ lastName: evt.target.value })}\n            />\n\n            <Form.Select\n              required\n              label=\"Role\"\n              htmlFor=\"role\"\n              value={this.state.role}\n              options={roleOptions}\n              onChange={(evt, data) => {\n                  this.setState({ role: data.value })\n                }\n              }\n            />\n\n            {(() => {\n              switch(role) {\n                case 'Caseworker':\n                  return <Form.Select \n                            required \n                            label=\"Affiliated Organization:\" \n                            htmlFor=\"organization\" \n                            value={this.state.org} \n                            options={orgOptions} \n                            onChange={(evt, data) => { \n                                this.setState({ org: data.value }) \n                              }\n                            } \n                          />;\n                case 'Farmer':\n                  return <Form.Input \n                            required\n                            label=\"Farm Name:\" \n                            htmlFor=\"organization\" \n                            value={this.state.org} \n                            onInput={evt => this.setState({ org: evt.target.value })}\n                          />;\n                case 'Admin':\n                  return <Form.Input \n                          label='Affiliated Organization:'\n                          htmlFor=\"organization\"  \n                          value={\"Food Access Partnership\"} \n                          placeholder='Food Access Partnership' \n                          readOnly \n                        />;\n                case 'Bookkeeper':\n                return <Form.Input \n                        label='Affiliated Organization:'\n                        htmlFor=\"organization\"  \n                        value={\"Food Access Partnership\"} \n                        placeholder='Food Access Partnership' \n                        readOnly \n                      />;\n                default:\n                  return <div></div>;\n              }\n            })()}\n\n            <Form.Input\n              required\n              id=\"email\"\n              htmlFor=\"email\"\n              label=\"Email\"\n              type=\"email\"\n              placeholder=\"Enter your email address\"\n              value={this.state.email}\n              onInput={evt => this.setState({ email: evt.target.value })}\n            />\n\n            <Form.Input\n              required\n              id=\"pw\"\n              htmlFor=\"password\"\n              label=\"Password\"\n              type=\"password\"\n              placeholder=\"Enter your password\"\n              value={this.state.pw}\n              onInput={evt => this.setState({ pw: evt.target.value })}\n            />\n\n            <Form.Input\n              required\n              id=\"pw_confrim\"\n              htmlFor=\"passwordConfirm\"\n              label=\"Reenter Password\"\n              type=\"password\"\n              placeholder=\"confirm your password\"\n              value={this.state.pw_confirm}\n              onInput={evt => this.setState({ pw_confirm: evt.target.value })}\n            />\n\n            <Button type=\"submit\">Create Account</Button>\n            \n          </Form>\n          <Message attached=\"bottom\" className=\"messageFooter\" info>\n            <Icon name=\"help\" />\n            Already have an account? &nbsp;\n            <Link to={constants.routes.base}>Sign in!</Link>&nbsp;\n          </Message>\n        </Grid.Column>\n      </Responsive>\n    );\n  }\n}\n","import React from \"react\";\nimport firebase from 'firebase/app'\nimport { Form, Button, Grid, Responsive, Message } from 'semantic-ui-react';\nimport \"firebase/auth\";\nimport \"firebase/database\";\n\nexport default class AccountRecovery extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      email: \"\",\n      errorMessage: false,\n      successMessage: undefined\n    };\n  }\n\n  componentDidMount() {\n    this.authUnsub = firebase.auth().onAuthStateChanged(user => {\n      this.setState({\n        currentUser: user\n      });\n    });\n  }\n\n  componentWillUnmount() {\n    this.authUnsub();\n  }\n\n  handlePasswordReset(evt) {\n    let auth = firebase.auth();\n    this.setState({ errorMessage: undefined });\n    auth\n      .sendPasswordResetEmail(this.state.email)\n      .then( this.setState({\n        successMessage: true,\n        email: \"\"\n      }) )\n      .catch(err => this.setState({\n        errorMessage: err.message \n      }));\n  }\n\n  handleOnUpdate = (e, { width }) => this.setState({ width })\n\n    render() {\n      const { width, successMessage, email } = this.state\n      const colWidth = width >= Responsive.onlyTablet.minWidth ? '6' : '12'\n\n      return (\n        <Responsive as={Grid} fireOnMount onUpdate={this.handleOnUpdate} centered=\"true\" middle columns={1}>\n          <Grid.Column width={colWidth} verticalAlign=\"middle\" textAlign=\"left\">\n            \n            <Message\n              attached='top'\n              header=\"Account Recovery\"\n              content=\"Enter your account email to reset your password.\"\n              className=\"messageHeader\"\n            />\n            \n            <Form \n              className=\"attached fluid segment messageBody\"\n              onSubmit={evt => this.handlePasswordReset(evt)}\n              warning={successMessage}>\n                \n                <Form.Input\n                  required\n                  id=\"email\"\n                  label='Email'\n                  type=\"email\"\n                  placeholder=\"Enter your email address\"\n                  value={this.state.email}\n                  onInput={evt => this.setState({ email: evt.target.value })}\n                />\n\n                <Button type=\"submit\" content='Reset'/>\n\n                <Message\n                  warning\n                  header={\"Thank you\"}\n                  content={\"If that account exists in our system, password reset steps will be sent\"}\n                />\n\n            </Form>\n          </Grid.Column>\n        </Responsive>\n        )\n    }\n}\n","import React from 'react';\nimport { Button, Card, Modal, Confirm } from 'semantic-ui-react';\nimport firebase from 'firebase/app';\n\nexport default class BuckSetListItem extends React.Component {\n\n    constructor(props) {\n        super(props)\n        this.state = {\n            viewModalOpen: false,\n            deleteModalOpen: false\n        }\n    }\n\n    showView = () => this.setState({ viewModalOpen: true })\n\n    open = () => this.setState({ open: true })\n    close = () => this.setState({ open: false })\n\n    deleteBuckSet = () => {\n        let key = this.props.data.title\n        //TODO: make if(!key) {...} and throw an error \n        if(key != '') {\n            let buckSetRef = firebase.database().ref('buckSets/' + key)\n            buckSetRef.remove()\n            .then(() =>{\n                console.log(\"Remove succeeded.\")\n                this.setState({\n                    deleteModalOpen: false\n                })\n            })\n            .catch((error) => {\n                console.log(\"Remove failed: \" + error.message)\n            });\n        }\n        this.close()\n    }\n\n    viewBuckSet = () => {\n    }\n\n    render () { \n        const { name, createdBy } = this.props.data\n        // const { open } = this.state\n\n        return(\n                <Card fluid>\n                    <Card.Content>\n                        <Card.Header>{name}</Card.Header>\n                        <Card.Meta>{createdBy}</Card.Meta>\n                    </Card.Content>\n\n                    <Card.Content extra>\n                        <Modal trigger={<Button primary content='View'/>}\n                            size=\"small\" \n                            open={this.viewModalOpen} \n                            onClose={this.close} \n                            closeIcon >\n                            <Modal.Header>\"{name}\" Buck Set</Modal.Header>\n                            <Modal.Content>\n                                <p>Created by {createdBy}</p>\n                                <p>More information about the selected buck set</p>\n                            </Modal.Content>\n                        </Modal>\n\n                        <Button icon=\"trash\"/>\n                        <Confirm \n                            size='small' \n                            header={`Are you sure you want to delete ${name} Buck Set?`}\n                            content=\"Doing so will mark all VIGA bucks generated for this set as inactive\"\n                            cancelButton=\"Cancel\"\n                            confirmButton=\"Delete\"\n                            open={this.state.open} \n                            onCancel={this.close} \n                            onConfirm={() => this.deleteBuckSet()} />\n\n                        {/* <Modal trigger={<Button icon='trash'/>} \n                                size=\"mini\" \n                                open={this.deleteModalOpen} \n                                onClose={this.close}\n                                closeIcon >\n                            <Modal.Header>Are you sure you want to delete \"{name}\" Buck Set?</Modal.Header>\n                            <Modal.Content>\n                                <p>Doing so will mark all VIGA bucks generated for this set as inactive</p>\n                                \n                            </Modal.Content>\n                            <Modal.Actions>\n\n                                <Button color=\"red\" onClick={() => this.deleteBuckSet()}  content='Delete' />\n\n                            </Modal.Actions>\n                        </Modal> */}\n                    </Card.Content>\n                </Card>\n        )\n    }\n}\n","import React from \"react\";\nimport BuckSetListItem from \"./BuckSetListItem.jsx\";\nimport { Header, Container, Grid, Card } from \"semantic-ui-react\";\nimport firebase from \"firebase/app\";\n\nexport default class ViewBucks extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      firebaseBuckSet: []\n    };\n  }\n\n  componentDidMount() {\n    let firebaseBuckSet = [];\n\n    let buckSetsRef = firebase.database().ref(\"buckSets\");\n    buckSetsRef.orderByChild(\"createdOn\").on(\"child_added\", snapshot => {\n      const value = snapshot.val();\n      // sort by newest\n      firebaseBuckSet.push({\n        name: value.name,\n        createdBy: value.createdBy\n      });\n      this.setState({\n        firebaseBuckSet\n      });\n    });\n    buckSetsRef.orderByChild(\"createdOn\").on(\"child_removed\", snapshot => {\n      const value = snapshot.val();\n      // filter out the removed item and force another render\n      firebaseBuckSet = firebaseBuckSet.filter(\n        el => !(el.title === value.name && el.subtitle === value.createdBy)\n      );\n      this.setState({\n        firebaseBuckSet\n      });\n    });\n  }\n\n  render() {\n    return (\n      <Grid.Column width={6}>\n        <Container>\n          <Header as=\"h2\">Existing Buck Sets</Header>\n          <Card.Group>\n            {//for each item in the data provided, map will create a BuckSetListItem\n            //that has the respective title and subtitle\n            this.state.firebaseBuckSet.map(element => {\n              return (\n                <BuckSetListItem\n                  key={element.name + element.createdBy}\n                  data={element}\n                />\n              );\n            })}\n          </Card.Group>\n        </Container>\n      </Grid.Column>\n    );\n  }\n}\n","import React from \"react\";\nimport firebase from \"firebase/app\";\nimport \"firebase/auth\";\nimport \"firebase/functions\";\nimport \"firebase/database\";\nimport {\n  Statistic,\n  Header,\n  Button,\n  Divider,\n  Grid,\n  Form,\n  Message,\n  Segment,\n  Container\n} from \"semantic-ui-react\";\nimport bgImg from \"../farmBuckEnglish.jpg\";\nimport bgImgSP from \"../farmBuckSpanish.jpg\";\nimport pdfMake from \"pdfmake/build/pdfmake\";\nimport pdfFonts from \"pdfmake/build/vfs_fonts\";\npdfMake.vfs = pdfFonts.pdfMake.vfs;\n\nconst orgID = {\n  Foodbank: \"A-1\",\n  dove: \"A-2\",\n  vcc: \"A-3\",\n  seniorcenter: \"A-4\",\n  interfaith: \"A-5\",\n  vashonhousehold: \"A-6\",\n  lacomunidad: \"A-7\",\n  vyfs: \"A-8\"\n};\nexport default class CreateBucks extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: false,\n      complete: false,\n      hasError: false,\n      errorMessage: \"\"\n    };\n  }\n\n  //TODO: errorMessage (a string) should be replaced with hasError (a boolean) in the form props.\n\n  toDataURL(src, callback, outputFormat) {\n    var img = new Image();\n    img.crossOrigin = \"Anonymous\";\n    img.onload = function() {\n      var canvas = document.createElement(\"CANVAS\");\n      var ctx = canvas.getContext(\"2d\");\n      var dataURL;\n      canvas.height = this.naturalHeight;\n      canvas.width = this.naturalWidth;\n      ctx.drawImage(this, 0, 0);\n      dataURL = canvas.toDataURL(outputFormat);\n      callback(dataURL);\n    };\n    img.src = src;\n    if (img.complete || img.complete === undefined) {\n      img.src =\n        \"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==\";\n      img.src = src;\n    }\n  }\n\n  createPDF(data, dataURL, dataURLSP) {\n    let ids = data.ids;\n    let year = data.Year;\n\n    var documentDefinition = {\n      content: []\n    };\n\n    documentDefinition.pageSize = \"LETTER\";\n\n    // PDF VARIABLES(in mm):\n\n    var count = 1;\n\n    for (var i = 0; i < ids.length; i++) {\n      let id = ids[i];\n      console.log();\n      let pOrgID = orgID[id.partnerOrg];\n      let code = id.id;\n      let qr;\n      let exp = {\n        text: \"Expires: \" + year,\n        absolutePosition: { x: 395, y: 198 * (i % 4) + 141 },\n        fontSize: 7,\n        color: \"white\",\n        bold: true\n      };\n      let yearText = {\n        text: year.split(\"-\")[0],\n        absolutePosition: { x: 391, y: 198 * (i % 4) + 171 },\n        fontSize: 4,\n        color: \"#5f605f\",\n        bold: true\n      };\n      let coupon = {\n        image: dataURL,\n        height: 198,\n        width: 455,\n        absolutePosition: { x: 78.5, y: 198 * (i % 4) }\n      };\n      let org = {\n        text: pOrgID,\n        absolutePosition: { x: 386, y: 198 * (i % 4) + 158 },\n        fontSize: 12,\n        color: \"#5f605f\",\n        bold: true\n      };\n\n      documentDefinition.content.push(coupon);\n      documentDefinition.content.push(exp);\n      documentDefinition.content.push(org);\n      documentDefinition.content.push(yearText);\n\n      if (count % 4 === 0 || count === ids.length) {\n        qr = {\n          qr: code,\n          fit: 50,\n          absolutePosition: { x: 390, y: 198 * (i % 4) + 44 },\n          pageBreak: \"after\"\n        };\n        documentDefinition.content.push(qr);\n        if (count % 4 === 0) {\n          if (count === ids.length) {\n            this.generateSpanishPage(documentDefinition, dataURLSP, 4, true);\n          } else {\n            this.generateSpanishPage(documentDefinition, dataURLSP, 4, false);\n          }\n        } else {\n          if (count === ids.length) {\n            this.generateSpanishPage(\n              documentDefinition,\n              dataURLSP,\n              count % 4,\n              true\n            );\n          } else {\n            this.generateSpanishPage(\n              documentDefinition,\n              dataURLSP,\n              count % 4,\n              false\n            );\n          }\n        }\n      } else {\n        qr = {\n          qr: code,\n          fit: 50,\n          absolutePosition: { x: 390, y: 198 * (i % 4) + 44 }\n        };\n        documentDefinition.content.push(qr);\n      }\n      console.log(JSON.stringify(qr));\n      count++;\n    }\n\n    documentDefinition.pageMargins = [0, 0, 0, 0];\n\n    return documentDefinition;\n  }\n\n  generateSpanishPage(doc, spURL, count, end) {\n    for (let i = 0; i < count - 1; i++) {\n      let coupon = {\n        image: spURL,\n        height: 198,\n        width: 455,\n        absolutePosition: { x: 78.5, y: 198 * (i % 4) }\n      };\n      doc.content.push(coupon);\n    }\n    if (end) {\n      doc.content.push({\n        image: spURL,\n        height: 198,\n        width: 455,\n        absolutePosition: { x: 78.5, y: 198 * (count - 1) }\n      });\n    } else {\n      doc.content.push({\n        image: spURL,\n        height: 198,\n        width: 455,\n        absolutePosition: { x: 78.5, y: 198 * (count - 1) },\n        pageBreak: \"after\"\n      });\n    }\n  }\n\n  // takes organization name, voucher count, and a list of ids and saves them in the Firebase Realtime database\n  postVoucherData(organization, count, ids) {\n    let updates = {};\n\n    for (let i = 0; i < count; i++) {\n      let voucherData = {\n        organization,\n        createdOn: new Date(),\n        expirationDate: this.props.expirationDate\n      };\n\n      let newVoucherKey = firebase\n        .database()\n        .ref()\n        .child(\"vouchers\")\n        .push().key;\n      ids.push({ partnerOrg: organization, id: newVoucherKey });\n\n      firebase\n        .database()\n        .ref()\n        .child(\"vis2/\" + organization + \"/created/\")\n        .update({\n          [newVoucherKey]: new Date()\n        });\n\n      updates[\"/vouchers/\" + newVoucherKey] = voucherData;\n    }\n\n    return firebase\n      .database()\n      .ref()\n      .update(updates);\n  }\n\n  // return true if validated form data is acceptable, false otherwise\n  validateFormData = async sum => {\n    if (sum <= 0) {\n      this.setState({\n        errorMessage: \"Sum of vouchers in form must be greater than zero.\"\n      });\n      return false;\n    }\n\n    const { buckSetName } = this.props;\n    let buckSetsRef = firebase.database().ref(\"buckSets\");\n\n    let isTrue = true;\n    // await the results from firebase, once because this should be done only once the function\n    // fires\n    await buckSetsRef\n      .orderByChild(\"name\")\n      .equalTo(buckSetName)\n      .once(\"value\", snapshot => {\n        snapshot.forEach(childSnapshot => {\n          let key = childSnapshot.key;\n          let childData = childSnapshot.val();\n          if (childData.name == buckSetName) {\n            this.setState({\n              errorMessage: \"The buck set name you used already exists.\"\n            });\n            isTrue = false;\n          }\n        });\n      });\n    return isTrue;\n  };\n\n  // On submit of the Create Voucher form the function saves given data to\n  // Firebase and calls postData to Google Cloud Function to generate pdf\n  handleSubmit = async event => {\n    event.preventDefault();\n    const {\n      doveCount,\n      vyfsCount,\n      lacomunidadCount,\n      vashonhouseholdCount\n    } = this.props;\n\n    this.setState({\n      loading: true\n    });\n\n    let sum = doveCount + vyfsCount + lacomunidadCount + vashonhouseholdCount;\n    // await to do a lookup in firebase if the name they're using has been used already\n    let isValid = await this.validateFormData(sum);\n    if (!isValid) {\n      this.setState({\n        loading: false\n      });\n      return;\n    } else {\n      this.setState({\n        errorMessage: \"\"\n      });\n    }\n\n    // Add the new buck set to the list of buckSets in Firebase\n    const promiseFromFirebase = firebase\n      .database()\n      .ref()\n      .child(\"buckSets/\" + this.props.buckSetName)\n      .update({\n        name: this.props.buckSetName,\n        createdOn: new Date(),\n        createdBy: this.props.username,\n        expirationDate: this.props.expirationDate,\n        foodbankCount: this.props.foodbankCount,\n        doveCount: this.props.doveCount,\n        communitycareCount: this.props.communitycareCount,\n        seniorcenterCount: this.props.seniorcenterCount,\n        interfaithCount: this.props.interfaithCount,\n        communitymealsCount: this.props.communitymealsCount,\n        vashonhouseholdCount: this.props.vashonhouseholdCount,\n        lacomunidadCount: this.props.lacomunidadCount,\n        vyfsCount: this.props.vyfsCount,\n        vyfslatinxCount: this.props.vyfslatinxCount,\n        vyfsfamilyplaceCount: this.props.vyfsfamilyplaceCount\n      });\n\n    promiseFromFirebase\n      .then(data => {\n        console.log(\"Buckset upload passed\");\n      })\n      .catch(err => {\n        console.log(\"Buckset upload failed with: \", err);\n      });\n\n    //post the data, wait on each one to resolve\n    let ids = [];\n    let promise1 = this.postVoucherData(\"dove\", doveCount, ids);\n    let promise2 = this.postVoucherData(\"vyfs\", vyfsCount, ids);\n    let promise3 = this.postVoucherData(\"lacomunidad\", lacomunidadCount, ids);\n    let promise4 = this.postVoucherData(\n      \"vashonhousehold\",\n      vashonhouseholdCount,\n      ids\n    );\n\n    // prepare data for post to Google Cloud Function\n    let data = {\n      expirationDate: this.props.expirationDate,\n      ids\n    };\n\n    // Call Google Cloud Function to generate PDF of vouchers\n    Promise.all([promise1, promise2, promise3, promise4])\n      .then(doesPass => {\n        this.toDataURL(bgImgSP, dataUrlSP => {\n          this.toDataURL(bgImg, dataUrl => {\n            let documentDefinition = this.createPDF(data, dataUrl, dataUrlSP);\n            console.log(JSON.stringify(documentDefinition));\n            pdfMake\n              .createPdf(documentDefinition)\n              .download(this.props.buckSetName + \".pdf\", () => {\n                this.setState({\n                  complete: true,\n                  loading: false,\n                  errorMessage: \"\"\n                });\n                const { toggleShowCreateBucks } = this.props;\n                toggleShowCreateBucks();\n              });\n          });\n        });\n      })\n      .catch(err => {\n        console.log(\"Error on firebase request\", err);\n        this.setState({\n          errorMessage: \"Error on firebase request\"\n        });\n      });\n    console.log(\"firebase.functions() = \", firebase.functions());\n  };\n\n  render() {\n    const { loading, errorMessage } = this.state;\n    const { toggleShowCreateBucks } = this.props;\n    let sum =\n      this.props.foodbankCount +\n      this.props.doveCount +\n      this.props.communitycareCount +\n      this.props.seniorcenterCount +\n      this.props.interfaithCount +\n      this.props.communitymealsCount +\n      this.props.vashonhouseholdCount +\n      this.props.lacomunidadCount +\n      this.props.vyfsCount +\n      this.props.vyfslatinxCount +\n      this.props.vyfsfamilyplaceCount;\n\n    return (\n      <Grid.Column width={8}>\n        <Segment raised>\n          <Container>\n            <Form\n              // onSubmit={this.handleSubmit}\n              onSubmit={toggleShowCreateBucks}\n              loading={loading}\n              error={errorMessage}\n            >\n              <Form.Input\n                inline\n                required\n                fluid\n                transparent\n                size=\"massive\"\n                placeholder=\"Buck Set Name\"\n                value={this.props.buckSetName}\n                onInput={evt =>\n                  this.props.handleChange({ buckSetName: evt.target.value })\n                }\n              />\n\n              <Form.Input\n                width={8}\n                inline\n                required\n                fluid\n                label=\"Expiration Date\"\n                type=\"date\"\n                value={this.props.expirationDate}\n                onInput={evt =>\n                  this.props.handleChange({\n                    expirationDate: evt.target.value\n                  })\n                }\n              />\n\n              <Header as=\"h5\" color=\"grey\" textAlign=\"left\">\n                BUCK ALLOCATION\n              </Header>\n\n              <Form.Input\n                width={6}\n                inline\n                size=\"mini\"\n                fluid\n                label=\"Vashon Community Food Bank\"\n                placeholder={0}\n                type=\"number\"\n                onInput={evt =>\n                  this.props.handleChange({\n                    foodbankCount: Number(evt.target.value)\n                  })\n                }\n                min={0}\n              />\n\n              <Form.Input\n                width={6}\n                inline\n                size=\"mini\"\n                fluid\n                label=\"DoVE\"\n                placeholder={0}\n                type=\"number\"\n                onInput={evt =>\n                  this.props.handleChange({\n                    doveCount: Number(evt.target.value)\n                  })\n                }\n                min={0}\n              />\n\n              <Form.Input\n                width={6}\n                inline\n                size=\"mini\"\n                fluid\n                label=\"Vashon Community Care\"\n                placeholder={0}\n                type=\"number\"\n                onInput={evt =>\n                  this.props.handleChange({\n                    communitycareCount: Number(evt.target.value)\n                  })\n                }\n                min={0}\n              />\n\n              <Form.Input\n                width={6}\n                inline\n                size=\"mini\"\n                fluid\n                label=\"Vashon Senior Center\"\n                placeholder={0}\n                type=\"number\"\n                onInput={evt =>\n                  this.props.handleChange({\n                    seniorcenterCount: Number(evt.target.value)\n                  })\n                }\n                min={0}\n              />\n\n              <Form.Input\n                width={6}\n                inline\n                size=\"mini\"\n                fluid\n                label=\"Interfaith Council to Prevent Homelessness\"\n                placeholder={0}\n                type=\"number\"\n                onInput={evt =>\n                  this.props.handleChange({\n                    interfaithCount: Number(evt.target.value)\n                  })\n                }\n                min={0}\n              />\n\n              <Form.Input\n                width={6}\n                inline\n                size=\"mini\"\n                fluid\n                label=\"Community Meals\"\n                placeholder={0}\n                type=\"number\"\n                onInput={evt =>\n                  this.props.handleChange({\n                    communitymealsCount: Number(evt.target.value)\n                  })\n                }\n                min={0}\n              />\n\n              <Form.Input\n                width={6}\n                inline\n                size=\"mini\"\n                fluid\n                label=\"Vashon Household\"\n                placeholder={0}\n                type=\"number\"\n                onInput={evt =>\n                  this.props.handleChange({\n                    vashonhouseholdCount: Number(evt.target.value)\n                  })\n                }\n                min={0}\n              />\n\n              <Form.Input\n                width={6}\n                inline\n                size=\"mini\"\n                fluid\n                label=\"La Communidad \\ ECEAP\"\n                placeholder={0}\n                type=\"number\"\n                onInput={evt =>\n                  this.props.handleChange({\n                    lacomunidadCount: Number(evt.target.value)\n                  })\n                }\n                min={0}\n              />\n\n              <Form.Input\n                width={6}\n                inline\n                size=\"mini\"\n                fluid\n                label=\"VYFS\"\n                placeholder={0}\n                type=\"number\"\n                onInput={evt =>\n                  this.props.handleChange({\n                    vyfsCount: Number(evt.target.value)\n                  })\n                }\n                min={0}\n              />\n\n              <Form.Input\n                width={6}\n                inline\n                size=\"mini\"\n                fluid\n                label=\"VYFS: Latinx\"\n                placeholder={0}\n                type=\"number\"\n                onInput={evt =>\n                  this.props.handleChange({\n                    vyfslatinxCount: Number(evt.target.value)\n                  })\n                }\n                min={0}\n              />\n\n              <Form.Input\n                width={6}\n                inline\n                size=\"mini\"\n                fluid\n                label=\"VYFS: Family Place\"\n                placeholder={0}\n                type=\"number\"\n                onInput={evt =>\n                  this.props.handleChange({\n                    vyfsfamilyplaceCount: Number(evt.target.value)\n                  })\n                }\n                min={0}\n              />\n\n              <Divider hidden />\n\n              <Statistic.Group widths=\"two\">\n                <Statistic>\n                  <Statistic.Value>{sum * 1}</Statistic.Value>\n                  <Statistic.Label>VIGA Bucks</Statistic.Label>\n                </Statistic>\n                <Statistic>\n                  <Statistic.Value>${2 * sum}.00</Statistic.Value>\n                  <Statistic.Label>Dollars</Statistic.Label>\n                </Statistic>\n              </Statistic.Group>\n\n              <Divider hidden />\n\n              {<Button color=\"blue\">Next Step</Button>}\n\n              <Message\n                error\n                header={errorMessage}\n                content={\"form not submitted\"}\n              />\n            </Form>\n          </Container>\n        </Segment>\n      </Grid.Column>\n    );\n  }\n}\n","import React from \"react\";\nimport \"firebase/auth\";\nimport \"firebase/functions\";\nimport \"firebase/database\";\nimport firebase from \"firebase/app\";\nimport constants from \"./constants\";\nimport { Link } from \"react-router-dom\";\nimport {\n  Statistic,\n  Header,\n  Divider,\n  Button,\n  Grid,\n  Segment\n} from \"semantic-ui-react\";\nimport bgImg from \"../bucktemplateprintpage.jpg\";\nimport pdfMake from \"pdfmake/build/pdfmake\";\nimport pdfFonts from \"pdfmake/build/vfs_fonts\";\npdfMake.vfs = pdfFonts.pdfMake.vfs;\n\nexport default class FormSuccess extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {};\n  }\n\n  postVoucherData(organization, count, ids) {\n    let updates = {};\n\n    for (let i = 0; i < count; i++) {\n      let voucherData = {\n        organization,\n        createdOn: new Date(),\n        expirationDate: this.props.expirationDate\n      };\n\n      let newVoucherKey = firebase\n        .database()\n        .ref()\n        .child(\"vouchers\")\n        .push().key;\n      ids.push({ partnerOrg: organization, id: newVoucherKey });\n\n      firebase\n        .database()\n        .ref()\n        .child(\"vis2/\" + organization + \"/created/\")\n        .update({\n          [newVoucherKey]: new Date()\n        });\n\n      updates[\"/vouchers/\" + newVoucherKey] = voucherData;\n    }\n\n    return firebase\n      .database()\n      .ref()\n      .update(updates);\n  }\n\n  createPDF(data) {\n    let ids = data.ids;\n    let expirationDate = data.expirationDate;\n\n    var documentDefinition = {\n      content: []\n    };\n\n    documentDefinition.content.pageSize = \"LETTER\";\n\n    // PDF VARIABLES(in mm):\n\n    var count = 1;\n\n    ids.forEach(id => {\n      console.log(id);\n      let pOrg = id.partnerOrg;\n      let code = id.id;\n      let qr;\n      if (count % 4 == 0 && count !== ids.length) {\n        qr = {\n          qr: code,\n          fit: 50,\n          margin: [381, 0, 0, 137],\n          pageBreak: \"after\"\n        };\n      } else if (count % 4 == 1) {\n        qr = { qr: code, fit: 50, margin: [381, 51, 0, 137] };\n      } else {\n        qr = { qr: code, fit: 50, margin: [381, 0, 0, 137] };\n      }\n      console.log(JSON.stringify(qr));\n      documentDefinition.content.push(qr);\n      count++;\n    });\n\n    documentDefinition.pageMargins = [0, 0, 0, 0];\n\n    return documentDefinition;\n  }\n\n  // On submit of the Create Voucher form the function saves given data to\n  // Firebase and calls postData to Google Cloud Function to generate pdf\n  handleSubmit = async event => {\n    event.preventDefault();\n    const {\n      foodbankCount,\n      doveCount,\n      communitycareCount,\n      seniorcenterCount, \n      interfaithCount,\n      communitymealsCount,\n      vashonhouseholdCount,\n      lacomunidadCount,\n      vyfsCount,\n      vyfslatinxCount,\n      vyfsfamilyplaceCount,\n    } = this.props;\n\n    this.setState({\n      loading: true\n    });\n\n    let sum = foodbankCount +\n    doveCount +\n    communitycareCount +\n    seniorcenterCount + \n    interfaithCount +\n    communitymealsCount +\n    vashonhouseholdCount +\n    lacomunidadCount +\n    vyfsCount +\n    vyfslatinxCount +\n    vyfsfamilyplaceCount\n\n    // Add the new buck set to the list of buckSets in Firebase\n    const promiseFromFirebase = firebase\n      .database()\n      .ref()\n      .child(\"buckSets/\" + this.props.buckSetName)\n      .update({\n        name: this.props.buckSetName,\n        createdOn: new Date(),\n        createdBy: this.props.username,\n        expirationDate: this.props.expirationDate,\n        foodbankCount: this.props.foodbankCount,\n        doveCount: this.props.doveCount,\n        communitycareCount: this.props.communitycareCount,\n        seniorcenterCount: this.props.seniorcenterCount,\n        interfaithCount: this.props.interfaithCount,\n        communitymealsCount: this.props.communitymealsCount,\n        vashonhouseholdCount: this.props.vashonhouseholdCount,\n        lacomunidadCount: this.props.lacomunidadCount,\n        vyfsCount: this.props.vyfsCount,\n        vyfslatinxCount: this.props.vyfslatinxCount,\n        vyfsfamilyplaceCount: this.props.vyfsfamilyplaceCount\n      });\n\n    promiseFromFirebase\n      .then(data => {\n        console.log(\"Buckset upload passed\");\n      })\n      .catch(err => {\n        console.log(\"Buckset upload failed with: \", err);\n      });\n\n    //post the data, wait on each one to resolve\n    let ids = [];\n    let promise1 = this.postVoucherData(\"dove\", doveCount, ids);\n    let promise2 = this.postVoucherData(\"vyfs\", vyfsCount, ids);\n    let promise3 = this.postVoucherData(\"lacomunidad\", lacomunidadCount, ids);\n    let promise4 = this.postVoucherData(\"vashonhousehold\", vashonhouseholdCount, ids);\n\n    // prepare data for post to Google Cloud Function\n    let data = {\n      expirationDate: this.props.expirationDate,\n      ids\n    };\n\n    // Call Google Cloud Function to generate PDF of vouchers\n    Promise.all([promise1, promise2, promise3, promise4])\n      .then(doesPass => {\n        let documentDefinition = this.createPDF(data);\n        this.toDataURL(bgImg, dataUrl => {\n          documentDefinition.background = [\n            {\n              image: dataUrl,\n              width: 612.0,\n              height: 792.0\n            }\n          ];\n          console.log(JSON.stringify(documentDefinition));\n          pdfMake\n            .createPdf(documentDefinition)\n            .download(this.props.buckSetName + \".pdf\", () => {\n              this.setState({\n                complete: true,\n                loading: false,\n                errorMessage: \"\"\n              });\n              const { toggleShowCreateBucks } = this.props;\n              toggleShowCreateBucks();\n            });\n        });\n      })\n      .catch(err => {\n        console.log(\"Error on firebase request\", err);\n        this.setState({\n          errorMessage: \"Error on firebase request\"\n        });\n      });\n    console.log(\"firebase.functions() = \", firebase.functions());\n  };\n\n  render() {\n    //const { toggleShowCreateBucks } = this.props\n    let sum =\n      this.props.foodbankCount +\n      this.props.doveCount +\n      this.props.communitycareCount +\n      this.props.seniorcenterCount + \n      this.props.interfaithCount +\n      this.props.communitymealsCount +\n      this.props.vashonhouseholdCount +\n      this.props.lacomunidadCount +\n      this.props.vyfsCount +\n      this.props.vyfslatinxCount +\n      this.props.vyfsfamilyplaceCount\n\n    return (\n      <Grid.Column width={10}>\n        <Segment\n          raised\n          style={{\n            paddingTop: \"30px\",\n            paddingRight: \"40px\",\n            paddingLeft: \"40px\"\n          }}\n        >\n          <Header as=\"h1\" textAlign=\"left\">\n            Success!\n            <Header.Subheader>\n              \"{this.props.buckSetName}\" Buck Set Created\n            </Header.Subheader>\n          </Header>\n          <Header as=\"h5\" color=\"grey\" textAlign=\"left\">\n            BUCK ALLOCATION\n          </Header>\n          <table className=\"ui very basic table\">\n            <tbody>\n            <tr>\n                <td>Vashon Community Food Bank</td>\n                <td>{this.props.foodbankCount} bucks</td>\n                <td>${this.props.foodbankCount * 2}.00</td>\n              </tr>\n              <tr>\n                <td>DoVE</td>\n                <td>{this.props.doveCount} bucks</td>\n                <td>${this.props.doveCount * 2}.00</td>\n              </tr>\n              <tr>\n                <td>Vashon Community Care</td>\n                <td>{this.props.communitycareCount} bucks</td>\n                <td>${this.props.communitycareCount * 2}.00</td>\n              </tr>\n              <tr>\n                <td>Vashon Senior Center</td>\n                <td>{this.props.seniorcenterCount} bucks</td>\n                <td>${this.props.seniorcenterCount * 2}.00</td>\n              </tr>\n              <tr>\n                <td>Interfaith Council to Prevent Homelessness</td>\n                <td>{this.props.interfaithCount} bucks</td>\n                <td>${this.props.interfaithCount * 2}.00</td>\n              </tr>\n              <tr>\n                <td>Community Meals</td>\n                <td>{this.props.communitymealsCount} bucks</td>\n                <td>${this.props.communitymealsCount * 2}.00</td>\n              </tr>\n              <tr>\n                <td>Vashon Household</td>\n                <td>{this.props.vashonhouseholdCount} bucks</td>\n                <td>${this.props.vashonhouseholdCount * 2}.00</td>\n              </tr>\n              <tr>\n                <td>La Communidad \\ ECEAP</td>\n                <td>{this.props.lacomunidadCount} bucks</td>\n                <td>${this.props.lacomunidadCount * 2}.00</td>\n              </tr>\n              <tr>\n                <td>VYFS</td>\n                <td>{this.props.vyfsCount} bucks</td>\n                <td>${this.props.vyfsCount * 2}.00</td>\n              </tr>\n              <tr>\n                <td>VYFS: Latinx</td>\n                <td>{this.props.vyfslatinxCount} bucks</td>\n                <td>${this.props.vyfslatinxCount * 2}.00</td>\n              </tr>\n              <tr>\n                <td>VYFS: Family Place</td>\n                <td>{this.props.vyfsfamilyplaceCount} bucks</td>\n                <td>${this.props.vyfsfamilyplaceCount * 2}.00</td>\n              </tr>\n            </tbody>\n          </table>\n\n          <Header as=\"h5\" color=\"grey\" textAlign=\"left\">\n            EXPIRATION DATE\n          </Header>\n          <p>{this.props.expirationDate}</p>\n\n          <Divider hidden />\n\n          <Statistic.Group widths=\"two\">\n            <Statistic>\n              <Statistic.Value>{sum * 1}</Statistic.Value>\n              <Statistic.Label>VIGA Bucks</Statistic.Label>\n            </Statistic>\n            <Statistic>\n              <Statistic.Value>${2 * sum}.00</Statistic.Value>\n              <Statistic.Label>Dollars</Statistic.Label>\n            </Statistic>\n          </Statistic.Group>\n\n          <Divider hidden />\n\n          <Button content=\"Generate PDF for Print\" onClick={this.handleSubmit} />\n        </Segment>\n      </Grid.Column>\n    );\n  }\n}\n","import React from \"react\";\nimport ViewBucks from \"./ViewBucks\";\nimport CreateBucks from \"./CreateBucks\";\nimport { Grid, Container } from \"semantic-ui-react\";\nimport FormSuccess from \"./FormSuccess\";\n\nexport default class BucksLanding extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      showCreateBucks: true,\n      buckSetName: \"\",\n      foodbankCount: 0,\n      doveCount: 0,\n      communitycareCount: 0,\n      seniorcenterCount: 0,\n      interfaithCount: 0,\n      communitymealsCount: 0,\n      vashonhouseholdCount: 0,\n      lacomunidadCount: 0,\n      vyfsCount: 0,\n      vyfslatinxCount: 0,\n      vyfsfamilyplaceCount: 0,\n      expirationDate: \"\"\n    };\n    this.handleChange = this.handleChange.bind(this);\n    this.toggleShowCreateBucks = this.toggleShowCreateBucks.bind(this);\n  }\n\n  handleChange(newState) {\n    this.setState(newState);\n  }\n\n  toggleShowCreateBucks(_event) {\n    this.setState({\n      showCreateBucks: !this.state.showCreateBucks\n    });\n  }\n\n  render() {\n    return (\n      <Container>\n        <Grid stackable centered>\n          <Grid.Row>\n            {this.state.showCreateBucks ? (\n              <CreateBucks\n                toggleShowCreateBucks={this.toggleShowCreateBucks}\n                handleChange={this.handleChange}\n                buckSetName={this.state.buckSetName}\n                username={this.props.username}\n                foodbankCount={this.state.foodbankCount}\n                doveCount={this.state.doveCount}\n                communitycareCount={this.state.communitycareCount}\n                seniorcenterCount={this.state.seniorcenterCount}\n                interfaithCount={this.state.interfaithCount}\n                communitymealsCount={this.state.communitymealsCount}\n                vashonhouseholdCount={this.state.vashonhouseholdCount}\n                lacomunidadCount={this.state.lacomunidadCount}\n                vyfsCount={this.state.vyfsCount}\n                vyfslatinxCount={this.state.vyfslatinxCount}\n                vyfsfamilyplaceCount={this.state.vyfsfamilyplaceCount}\n                expirationDate={this.state.expirationDate}\n              />\n            ) : (\n              <FormSuccess\n                toggleShowCreateBucks={this.toggleShowCreateBucks}\n                buckSetName={this.state.buckSetName}\n                username={this.props.username}\n                foodbankCount={this.state.foodbankCount}\n                doveCount={this.state.doveCount}\n                communitycareCount={this.state.communitycareCount}\n                seniorcenterCount={this.state.seniorcenterCount}\n                interfaithCount={this.state.interfaithCount}\n                communitymealsCount={this.state.communitymealsCount}\n                vashonhouseholdCount={this.state.vashonhouseholdCount}\n                lacomunidadCount={this.state.lacomunidadCount}\n                vyfsCount={this.state.vyfsCount}\n                vyfslatinxCount={this.state.vyfslatinxCount}\n                vyfsfamilyplaceCount={this.state.vyfsfamilyplaceCount}\n                expirationDate={this.state.expirationDate}\n              />\n            )}\n            <ViewBucks />\n          </Grid.Row>\n        </Grid>\n      </Container>\n    );\n  }\n}\n","import React from \"react\";\nimport firebase from \"firebase/app\";\nimport \"firebase/auth\";\nimport \"firebase/database\";\nimport QrReader from \"react-qr-reader\";\nimport {\n  Segment,\n  Message,\n  Header,\n  Responsive,\n  Loader,\n  Dimmer,\n  Container,\n  SegmentGroup,\n  Grid\n} from \"semantic-ui-react\";\nexport default class Scan extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      legacyMode: false,\n      invalidScan: false,\n      scanState: \"\",\n      qrCode: \"\",\n      loading: false\n    };\n  }\n\n  // Checks that the data is a valid string\n  // AKA: handles if a non-VIGA QR code is scanned\n  isValid(str) {\n    return /[^.#$[\\]]/.test(str);\n  }\n\n  handleScan = data => {\n    if (data) {\n      // There is some data on the QR code\n      console.log(\"data \", data);\n      this.setState({\n        loading: true\n      });\n      if (this.isValid(data)) {\n        firebase\n          .database()\n          .ref(\"vouchers/\")\n          .child(data)\n          .once(\"value\", snapshot => {\n            if (snapshot.exists()) {\n              console.log(\"This ID exists.\");\n              //The data is an id that we created\n              this.populateUserData(data);\n              this.populateVisData(data);\n            } else {\n              // the snapshot does not exist\n              // logically, this buck has been deleted or is not a real buck\n              this.setState({ scanState: \"scanError\", loading: false });\n            }\n          })\n          .catch(err => {\n            console.log(\"Firebase voucher lookup err:\", err);\n            this.setState({ loading: false });\n          });\n      } else {\n        console.log(\"bad path\");\n        this.setState({\n          invalidScan: true,\n          scanState: \"scanError\",\n          loading: false\n        });\n      }\n    }\n  };\n\n  delayedStopLoading = () => {\n    setTimeout(() => {\n      this.setState({\n        loading: false\n      });\n    }, 2000);\n  };\n\n  populateVisData = async data => {\n    console.log(\"In the populate data branch\");\n    var redeemDate = new Date();\n    let vizRef = firebase\n      .database()\n      .ref()\n      .child(\"vis1/\" + this.props.userId);\n\n    if (this.props.role === \"farmer\") {\n      vizRef.update({\n        [data]: redeemDate\n      });\n\n      firebase\n        .database()\n        .ref(\"vouchers/\" + data)\n        .once(\"value\")\n        .then(function(snapshot) {\n          var org = snapshot.val().organization;\n          firebase\n            .database()\n            .ref()\n            .child(\"vis2/\" + org + \"/redeemed/\")\n            .update({\n              [data]: redeemDate\n            });\n        });\n    } else if (this.props.role === \"caseworker\") {\n      firebase\n        .database()\n        .ref(\"vouchers/\" + data)\n        .once(\"value\")\n        .then(function(snapshot) {\n          var org = snapshot.val().organization;\n          firebase\n            .database()\n            .ref()\n            .child(\"vis2/\" + org + \"/handedOut/\")\n            .update({\n              [data]: redeemDate\n            });\n        });\n    }\n  };\n\n  // If expired, farmers are instructed to complete submission in person, nothing is added to the database\n  // caseworkers are instructed to recycle if they try to scan an expired buck.\n  populateUserData = data => {\n    let scanState = \"\";\n    let voucherRef = firebase.database().ref(\"vouchers/\" + data);\n\n    let userRef = firebase.database().ref(\"users/\" + this.props.userId);\n\n    if (this.props.role === \"farmer\") {\n      // if they are a farmer, fill in the \"redeemedOn\" field on voucher object to the current time\n      let redeemedOnRef = firebase\n        .database()\n        .ref(\"vouchers/\" + data + \"/redeemedOn\");\n      redeemedOnRef.once(\"value\", snapshot => {\n        if (!snapshot.val()) {\n          //if it is null, there is no entry for redeemedOn, the voucher hasn't yet been redeemed\n          let redeemDate = new Date();\n          // this is necessary to get the expiration date\n          voucherRef.once(\"value\", snapshotInner => {\n            let expirationDate = new Date(snapshotInner.val().expirationDate);\n            if (redeemDate.getTime() <= expirationDate.getTime()) {\n              //not expired - success: add to database\n              voucherRef.update({\n                redeemedOn: redeemDate\n              });\n              // add the voucher id to the user's list of associated ids\n              userRef.child(\"vouchersList\").update({\n                [data]: \"notPaid\"\n              });\n              console.log(\"in the success statement\");\n              scanState = \"success\";\n            } else {\n              //expired - calls for farmer to redeem in person\n              console.log(\"in the expired statement\");\n              scanState = \"expiredFarmer\";\n            }\n            this.setState({ scanState }, this.delayedStopLoading);\n          });\n        } else {\n          console.log(\n            \".val() already exists, setting state to already redeemed\"\n          );\n          //if it is not null, the voucher has already been redeemed\n          scanState = \"alreadyRedeemed\";\n          this.setState({ scanState }, this.delayedStopLoading);\n        }\n      });\n    } else if (this.props.role === \"caseworker\") {\n      // if they are a caseworker, fill in the \"handedOutOn\" field on voucher object to the current time\n      let handedOutRef = firebase\n        .database()\n        .ref(\"vouchers/\" + data + \"/handedOutOn\");\n\n      handedOutRef.once(\"value\", snapshot => {\n        if (!snapshot.val()) {\n          //if it is null there is no entry for handedOutOn, the voucher hasn't yet been handed out\n          let handedOutDate = new Date();\n\n          // this is necessary to get the expiration date\n          voucherRef.once(\"value\", snapshot => {\n            let expirationDate = new Date(snapshot.val().expirationDate);\n            if (handedOutDate.getTime() <= expirationDate.getTime()) {\n              //the voucher is not expired, success: add to database\n              voucherRef.update({\n                handedOutOn: handedOutDate\n              });\n              userRef.child(\"vouchersList\").update({\n                [data]: \"true\"\n              });\n              console.log(\"in the success statement\");\n              scanState = \"success\";\n            } else {\n              //the voucher is expired, do not add to database\n              console.log(\"in the expired statement\");\n              scanState = \"expiredCaseworker\";\n            }\n            this.setState({ scanState }, this.delayedStopLoading);\n          });\n        } else {\n          // if it is not null, the voucher has already been redeemed\n          // caseworkers may still hand out vouchers that have been handed out before\n          // just without scanning them\n          scanState = \"alreadyHanded\";\n          this.setState({ scanState }, this.delayedStopLoading);\n        }\n      });\n    } else {\n      // not caseworker or farmer -> account does not support scanning\n      this.setState(\n        {\n          scanState: \"accountIssue\"\n        },\n        this.delayedStopLoading\n      );\n    }\n  };\n\n  showResponseMessage = scanState => {\n    switch (scanState) {\n      case \"success\":\n        return (\n          <Message\n            positive\n            attached=\"bottom\"\n            icon=\"thumbs up\"\n            header=\"Success!\"\n            content=\"This buck has been submitted! Feel free to recycle or keep for your records.\"\n          />\n        );\n      case \"expiredFarmer\":\n        return (\n          <Message\n            warning\n            attached=\"bottom\"\n            icon=\"calendar times outline\"\n            header=\"Expired\"\n            content=\"You may still receive compensation, please submit to a FAP organizer in person.\"\n          />\n        );\n      case \"alreadyRedeemed\":\n        return (\n          <Message\n            negative\n            attached=\"bottom\"\n            icon=\"x\"\n            header=\"Previously submitted\"\n            content=\"This buck has already been submitted.\"\n          />\n        );\n      case \"scanError\":\n        return (\n          <Message\n            warning\n            attached=\"bottom\"\n            icon=\"frown\"\n            header=\"Error scanning\"\n            content=\"Make sure you have a valid buck, then try again.\"\n          />\n        );\n      case \"alreadyHanded\":\n        return (\n          <Message\n            negative\n            attached=\"bottom\"\n            icon=\"x\"\n            header=\"Previously handed out\"\n            content='This buck has been \"handed out\" before, no need to scan again.'\n          />\n        );\n      case \"accountIssue\":\n        return (\n          <Message\n            warning\n            attached=\"bottom\"\n            icon=\"!\"\n            header=\"Error\"\n            content=\"Your account does not support scanning.\"\n          />\n        );\n      case \"expiredCaseworker\":\n        return (\n          <Message\n            warning\n            attached=\"bottom\"\n            icon=\"calendar times outline\"\n            header=\"This buck is expired\"\n            content=\"Please recycle this VIGA farm buck.\"\n          />\n        );\n      default:\n        return <div />;\n    }\n  };\n\n  handleError = err => {\n    console.error(err);\n    this.setState({\n      legacyMode: true\n    });\n  };\n\n  render() {\n    let scanner;\n    const { scanState, loading } = this.state;\n\n    if (this.state.legacyMode) {\n      scanner = (\n        <QrReader\n          delay={3000}\n          onError={this.handleError}\n          onScan={this.handleScan}\n          legacyMode\n        />\n      );\n    } else {\n      scanner = (\n        <QrReader\n          delay={3000}\n          onError={this.handleError}\n          onScan={this.handleScan}\n        />\n      );\n    }\n\n    return (\n      <div>\n        {/* Regular View */}\n        <Responsive as={Grid} centered minWidth={768}>\n          <Grid.Row>\n            <Segment basic>\n              {loading && (\n                <Dimmer active inverted>\n                  <Loader size={\"medium\"} />\n                </Dimmer>\n              )}\n              {!loading && this.showResponseMessage(scanState)}\n            </Segment>\n          </Grid.Row>\n          <Grid.Row>\n            <Grid.Column width={6}>\n              <Segment>{scanner}</Segment>\n            </Grid.Column>\n            <Grid.Column width={6}>\n              <Segment basic>\n                <Header as=\"h2\">How to Scan</Header>\n                <p>\n                  1. Make sure to allow this site to use your camera for\n                  scanning.\n                </p>\n                <p>\n                  2. Have your Farm Buck(s) in hand and center QR code in the\n                  camera view.\n                </p>\n                <p>\n                  3. You'll see a message informing you the scan is successful!\n                  Keep the buck for your records.\n                </p>\n              </Segment>\n            </Grid.Column>\n          </Grid.Row>\n        </Responsive>\n\n        {/* Mobile View */}\n        <Responsive as={Container} fluid maxWidth={767}>\n          {/* <Button onClick={() => this.handleScan('-LfzLzCkhhIL-fGnkuqh')}> CLICK ME </Button> */}\n\n          <SegmentGroup>\n            <Segment attached=\"top\">{scanner}</Segment>\n            <Segment basic attached=\"bottom\">\n              {loading && (\n                <Dimmer active inverted>\n                  <Loader size={\"mini\"} />\n                </Dimmer>\n              )}\n              {!loading && this.showResponseMessage(scanState)}\n            </Segment>\n          </SegmentGroup>\n\n          <Segment basic>\n            <Header as=\"h2\">How to Scan</Header>\n            <p>\n              1. Make sure to allow this site to use your camera for scanning.\n            </p>\n            <p>\n              2. Have your Farm Buck(s) in hand and center QR code in the camera\n              view.\n            </p>\n            <p>\n              3. You'll see a message informing you the scan is successful! Keep\n              the buck for your records.\n            </p>\n          </Segment>\n        </Responsive>\n      </div>\n    );\n  }\n}\n","import React from \"react\";\nimport firebase from \"firebase\";\nimport { Table, Icon, Header, Button, Confirm, Responsive} from \"semantic-ui-react\";\n\nexport default class Account extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      role: \"\"\n    };\n  }\n\n  handlePurge() {\n    console.log(\"in purge function\")\n    var deleteUser = firebase.functions().httpsCallable(\"deleteUser\");\n    deleteUser({ email: this.props.acctSnapshot.val().email }).then(result => {\n      console.log(result);\n    });\n    this.props.acctRef.child(this.props.acctSnapshot.key).remove();\n    this.close()\n  }\n\n  handleApprove() {\n    let acct = this.props.acctSnapshot.val();\n    this.props.acctRef.child(this.props.acctSnapshot.key).update({\n      approved: true\n    });\n    var changeRole = firebase.functions().httpsCallable(\"changeRole\");\n    changeRole({\n      email: acct.email,\n      role: acct.role\n    }).then(result => {\n      console.log(result);\n    });\n  }\n\n  open = () => {\n    console.log(\"in open function\")\n    this.setState({ open: true })\n  }\n\n  close = () => {\n    console.log(\"in close function\")\n    this.setState({ open: false })\n  }\n\n  handleOnUpdate = (e, { width }) => this.setState({ width })\n\n  render() {\n    // let user = firebase.auth().currentUser;\n    let acct = this.props.acctSnapshot.val();\n    let appEl;\n\n    if (acct.approved) {\n      appEl = (\n        <Table.Cell>\n          <Icon name=\"checkmark\" />\n          Approved\n        </Table.Cell>\n      );\n    } else {\n      appEl = (\n        <Table.Cell>\n          <Icon name=\"attention\" />\n          Requires Approval\n        </Table.Cell>\n      );\n    }\n\n    const { width } = this.state\n    const textAlign = width >= Responsive.onlyComputer.minWidth ? 'center' : 'left'\n\n\n    return (\n      <Responsive as={(Table.Row)} warning={!acct.approved} collapsing fireOnMount onUpdate={this.handleOnUpdate}>\n        <Table.Cell>\n          \n        <Header as='h4'>\n          <Header.Content>\n            {acct.firstName} {acct.lastName}\n            <Header.Subheader>{acct.org}</Header.Subheader>\n          </Header.Content>\n        </Header>\n        </Table.Cell>\n        <Table.Cell>{acct.role}</Table.Cell>\n        <Table.Cell>{acct.email}</Table.Cell>\n        {appEl}\n        <Table.Cell textAlign={textAlign}>\n          {acct.approved ? null : (\n            <Button.Group>\n              <Button compact size='mini' positive content=\"Approve\" onClick={() => this.handleApprove()}/>\n              <Button compact size='mini' content=\"Reject\" onClick={() => this.handlePurge()}/>\n            </Button.Group>\n          )}\n        </Table.Cell>\n        <Table.Cell textAlign={textAlign}>\n          <Icon\n              name=\"delete\"\n              className=\"delete\"\n              size=\"large\"\n              onClick={this.open}\n            />\n            <Confirm \n              size='small' \n              header=\"Are you sure?\"\n              content={`Are you sure you want to delete the account of ${acct.firstName} ${acct.lastName}? This action cannot be undone`}\n              cancelButton='Cancel'\n              confirmButton=\"Delete Account\"\n              open={this.state.open} \n              onCancel={this.close} \n              onConfirm={() => this.handlePurge()} />\n        </Table.Cell>\n      </Responsive>\n    );\n  }\n}\n","import React from \"react\";\nimport Account from \"./Account\";\nimport { Table, Segment, Loader, Dimmer, Responsive } from \"semantic-ui-react\";\n\nexport default class AccountList extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      accountSnapshot: undefined\n    };\n  }\n\n  componentWillReceiveProps(nextProps) {\n    this.props.accountRef.off(\"value\", this.unlisten);\n    this.unlisten = nextProps.accountRef.on(\"value\", snapshot =>\n      this.setState({\n        accountSnapshot: snapshot\n      })\n    );\n  }\n\n  componentDidMount() {\n    this.unlisten = this.props.accountRef.on(\"value\", snapshot =>\n      this.setState({ accountSnapshot: snapshot })\n    );\n  }\n\n  componentWillUnmount() {\n    this.props.accountRef.off(\"value\", this.unlisten);\n  }\n\n  render() {\n    if (!this.state.accountSnapshot) {\n      return   <div>\n                <Segment>\n                  <Dimmer active inverted>\n                    <Loader indeterminate>Loading Accounts</Loader>\n                  </Dimmer>\n                </Segment>\n                </div>\n    }\n\n    let accts = [];\n    this.state.accountSnapshot.forEach(acctSnapshot => {\n      if (this.props.user.email !== acctSnapshot.val().email) {\n        accts.push(\n          <Account\n            key={acctSnapshot.key}\n            acctSnapshot={acctSnapshot}\n            acctRef={this.props.accountRef}\n          />\n        );\n      }\n    });\n\n    return (\n      <div>\n        {/* Regular View */}\n        <Responsive as={Table} selectable minWidth={768}>\n          <Table.Header>\n            <Table.Row collapsing>\n              <Table.HeaderCell>Name</Table.HeaderCell>\n              <Table.HeaderCell>Role</Table.HeaderCell>\n              <Table.HeaderCell>Email</Table.HeaderCell>\n              <Table.HeaderCell>Approval Status</Table.HeaderCell>\n              <Table.HeaderCell textAlign='center'>Actions</Table.HeaderCell>\n              <Table.HeaderCell textAlign='center'>Delete Account</Table.HeaderCell>\n            </Table.Row>\n          </Table.Header>\n          <Table.Body>{accts}</Table.Body>\n        </Responsive>\n\n        {/* Mobile View */}\n        <Responsive as={Table} size=\"mini\" compact=\"small\" maxWidth={767}>\n          <Table.Header>\n              <Table.Row collapsing>\n                <Table.HeaderCell>Name</Table.HeaderCell>\n                <Table.HeaderCell>Role</Table.HeaderCell>\n                <Table.HeaderCell>Email</Table.HeaderCell>\n                <Table.HeaderCell>Approval Status</Table.HeaderCell>\n                <Table.HeaderCell>Delete Account</Table.HeaderCell>\n              </Table.Row>\n            </Table.Header>\n            <Table.Body>{accts}</Table.Body>\n        </Responsive>\n      </div>\n    )\n  }\n}\n","import React from \"react\";\nimport constants from \"./constants\";\nimport firebase from \"firebase/app\";\nimport \"firebase/auth\";\nimport \"firebase/database\";\nimport AccountList from \"./AccountList\";\nimport { Container, Segment } from \"semantic-ui-react\";\n\nexport default class ManageAccount extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      value: \"\",\n      filter: \"\",\n      name: \"\",\n      org: \"\",\n      role: \"\",\n      date_added: \"\",\n      errorMessage: undefined\n    };\n\n    this.handleChange = this.handleChange.bind(this);\n  }\n  \n  componentDidMount() {\n    this.authUnsub = firebase.auth().onAuthStateChanged(user => {\n      this.setState({\n        currentUser: user\n      });\n      if (this.state.currentUser === null) {\n        this.props.history.push(constants.routes.base);\n      }\n    });\n  }\n\n  componentWillUnmount() {\n    this.authUnsub();\n  }\n\n  handleChange(evt) {\n    this.setState({ value: evt.target.value });\n  }\n\n  render() {\n    let accountRef = firebase.database().ref(\"/users/\");\n\n    return (\n        <Segment raised>\n            <AccountList\n              user={this.state.currentUser}\n              accountRef={accountRef}\n            />\n        </Segment>\n    );\n  }\n}\n","import React from \"react\";\nimport constants from \"./constants\";\nimport firebase from \"firebase/app\";\nimport \"firebase/auth\";\nimport \"firebase/database\";\nimport { Responsive, Segment, Table, TableRow, Button, Label, Icon, Header, Confirm } from \"semantic-ui-react\";\n\nexport default class FarmerPayout extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n        farmerList: [],\n        paidUp: false\n    }\n  }\n\n  componentDidMount() {\n    this.authUnsub = firebase.auth().onAuthStateChanged(user => {\n      this.setState({\n        currentUser: user\n      });\n      if (!this.state.currentUser) { //changed from === null\n        this.props.history.push(constants.routes.base);\n      }\n    });\n\n    this.loadPayoutRecords()\n    this.listenForUpdates()\n  }\n\n  componentWillUnmount() {\n    this.authUnsub();\n  }\n\n  handleChange(evt) {\n    this.setState({ value: evt.target.value });\n  }\n\n  listenForUpdates = () => {\n    // let farmerList = this.state.farmerList\n    let farmerRef = firebase.database().ref('users')\n    farmerRef.on('child_changed', (_snapshot) => {\n        this.loadPayoutRecords()\n    })\n  }\n\n  loadPayoutRecords = () => {\n    let farmerList = []\n    let payoutRef = firebase.database().ref(\"/users/\");\n    payoutRef.once('value', (snapshot) => {\n        snapshot.forEach((childSnapshot) => {\n            let role = childSnapshot.val().role.toLowerCase()\n            let approved = childSnapshot.val().approved.toString().toLowerCase()\n\n            let totalBucks = 0\n            let bucksNotPaid = 0\n            //maybe can get rid of if statement...\n            if(childSnapshot.val().vouchersList) {\n                let vouchersList = childSnapshot.val().vouchersList  \n                Object.keys(vouchersList).forEach((voucher) => {\n                    totalBucks++\n                    if(vouchersList[voucher].toLowerCase() === 'notpaid') {\n                        bucksNotPaid++\n                    }\n                })\n            }\n\n            if(role === 'farmer' && approved === 'true') {\n                farmerList.push({\n                    name: childSnapshot.val().firstName + \" \" + childSnapshot.val().lastName,\n                    farmerUid: childSnapshot.key,\n                    farm: childSnapshot.val().org,\n                    email: childSnapshot.val().email,\n                    totalBucks: totalBucks,\n                    bucksNotPaid: bucksNotPaid,\n                    lastPayoutDate: childSnapshot.val().lastPayoutDate\n                })\n            }\n        });\n        this.setState({\n            farmerList\n        })\n    });\n    console.log(\"after set state, farmerList: \", farmerList)\n  }\n\n  open = () => this.setState({ open: true })\n  close = () => this.setState({ open: false })\n\n  // On Button click set the unpaid voucher list to be paidOut: true\n  completePayout = (farmerUid) => {\n    console.log(\"farmerUid\", farmerUid)\n    let farmerRef = firebase.database().ref('users/' + farmerUid + \"/vouchersList\")\n    farmerRef.on('value', (snapshot) => {\n        snapshot.forEach((childSnapshot) => {\n            let key = childSnapshot.key\n            console.log(\"key\", key)\n            let payoutRef = firebase.database().ref('users/' + farmerUid + \"/vouchersList\")\n            payoutRef.update({\n                [key]: \"paid\"\n            })\n        }) \n        let dateObj = new Date()\n        let prettyDate = (dateObj.getMonth() + 1) + \"/\" + dateObj.getDate() + \"/\" + dateObj.getFullYear()\n        console.log(\"prettyDate: \", prettyDate)\n        let dateRef =  firebase.database().ref('users/' + farmerUid)\n        dateRef.update({\n          lastPayoutDate: prettyDate\n        })\n    })\n    this.close()\n  }\n\n  render() {\n    const { farmerList } = this.state\n    console.log(\"farmerList: \", farmerList)\n\n    return (\n        <Segment raised>\n        <Header textAlign=\"center\" as=\"h3\">Farmer Payout Records</Header>\n\n          {/* Regular View */}\n          <Responsive as={Table} minWidth={1024} singleLine selectable stackable>\n            <Table.Header>\n              <Table.Row>\n                <Table.HeaderCell>Name</Table.HeaderCell>\n                <Table.HeaderCell>Farm</Table.HeaderCell>\n                <Table.HeaderCell>Email</Table.HeaderCell>\n                <Table.HeaderCell collapsing>Total Bucks Collected</Table.HeaderCell>\n                <Table.HeaderCell collapsing>Outstanding Bucks</Table.HeaderCell>\n                <Table.HeaderCell collapsing>Last Payout Date</Table.HeaderCell>\n              </Table.Row>\n            </Table.Header>\n\n            <Table.Body>\n            {\n            //for each item in the data provided, map will create a TableRow\n            //that has the respective name, farm, and email\n            farmerList.map(\n                (element) => {\n                    console.log(\"element: \", element)\n                    return (\n                        <TableRow>\n                            <Table.Cell>{element.name}</Table.Cell>\n                            <Table.Cell>{element.farm}</Table.Cell>\n                            <Table.Cell>{element.email}</Table.Cell>\n                            <Table.Cell>{element.totalBucks}</Table.Cell>\n                            <Table.Cell>\n                            {(element.bucksNotPaid === 0) ? \n                                <Button compact basic color='green'>\n                                <Icon color='green' name='checkmark' size='small' />\n                                All Paid Up!\n                                </Button>\n                                : \n                                <Button as='div' labelPosition='left'>\n                                    <Label basic as='a' pointing='right'>\n                                    {element.bucksNotPaid} Bucks / ${element.bucksNotPaid * 2}.00\n                                    </Label>\n                                    <Button color='green' icon onClick={this.open}>\n                                        <Icon name='dollar sign' />\n                                        Mark as Paid\n                                    </Button>\n                                    <Confirm \n                                        size='small' \n                                        header=\"Confirm Payout?\"\n                                        content={`This will mark (${element.bucksNotPaid}) unpaid bucks as PAID for ${element.name} at ${element.farm}`}\n                                        cancelButton='Cancel'\n                                        confirmButton=\"Mark as paid\"\n                                        open={this.state.open} \n                                        onCancel={this.close} \n                                        onConfirm={() => this.completePayout(element.farmerUid)} />\n                                </Button>\n                              }\n                              </Table.Cell>\n                              <Table.Cell>{element.lastPayoutDate}</Table.Cell>\n                          </TableRow>\n                    )\n                }\n            )\n            } \n          </Table.Body>\n          </Responsive>\n\n          {/* Mobile View */}\n          <Responsive as={Table} maxWidth={1023} compact=\"very\" singleLine selectable stackable>\n            <Table.Header>\n              <Table.Row>\n                <Table.HeaderCell>Name</Table.HeaderCell>\n                <Table.HeaderCell>Email</Table.HeaderCell>\n                <Table.HeaderCell collapsing>Total Bucks Collected</Table.HeaderCell>\n                <Table.HeaderCell collapsing>Outstanding Bucks</Table.HeaderCell>\n                <Table.HeaderCell collapsing>Last Payout Date</Table.HeaderCell>\n              </Table.Row>\n            </Table.Header>\n\n            <Table.Body>\n            {\n            //for each item in the data provided, map will create a TableRow\n            //that has the respective name, farm, and email\n            farmerList.map(\n                (element) => {\n                    console.log(\"element: \", element)\n                    return (\n                        <TableRow>\n                            <Table.Cell>\n                            <Header as='h4'>\n                              <Header.Content>\n                              {element.name}\n                                <Header.Subheader>{element.farm}</Header.Subheader>\n                              </Header.Content>\n                            </Header>\n                            </Table.Cell>\n\n                            <Table.Cell>{element.email}</Table.Cell>\n                            <Table.Cell>{element.totalBucks}</Table.Cell>\n                            <Table.Cell>\n                            {(element.bucksNotPaid === 0) ? \n                                <Button compact basic color='green' size=\"mini\">\n                                <Icon color='green' name='checkmark' size='small' />\n                                All Paid Up!\n                                </Button>\n                                : \n                                <Button as='div' labelPosition='left'>\n                                    <Label basic as='a' pointing='right'>\n                                    {element.bucksNotPaid} Bucks / ${element.bucksNotPaid * 2}.00\n                                    </Label>\n                                    <Button color='green' icon onClick={this.open}>\n                                        <Icon name='dollar sign' />\n                                        Mark as Paid\n                                    </Button>\n                                    <Confirm \n                                        size='small' \n                                        header=\"Confirm Payout?\"\n                                        content={`This will mark (${element.bucksNotPaid}) unpaid bucks as PAID for ${element.name} at ${element.farm}`}\n                                        cancelButton='Cancel'\n                                        confirmButton=\"Mark as paid\"\n                                        open={this.state.open} \n                                        onCancel={this.close} \n                                        onConfirm={() => this.completePayout(element.farmerUid)} />\n                                </Button>\n                              }\n                              </Table.Cell>\n                              <Table.Cell>{element.lastPayoutDate}</Table.Cell>\n                          </TableRow>\n                    )\n                }\n            )\n            } \n          </Table.Body>\n          </Responsive>\n      </Segment>\n    );\n  }\n}\n","import React, { useState, useEffect } from \"react\";\nimport { ResponsiveLine } from \"@nivo/line\";\n\nexport default function LineGraph(props) {\n  const [charData, setCharData] = useState([]);\n  const [role, setRole] = useState(\"\");\n  const [isLoaded, setIsLoaded] = useState(false);\n\n  useEffect(() => {\n    setRole(props.role);\n    setCharData(props.charData);\n    setIsLoaded(props.isLoaded);\n  }, [props]);\n\n  return (\n    <ResponsiveLine\n      data={charData}\n      colors={{ scheme: \"nivo\" }}\n      xScale={{\n        type: \"time\",\n        format: \"%Y-%m-%d\",\n        precision: \"day\"\n      }}\n      xFormat=\"time: %Y-%m-%d\"\n      curve=\"monotoneX\"\n      yScale={{\n        type: \"linear\",\n        stacked: false\n      }}\n      axisLeft={{\n        orient: \"left\",\n        tickSize: 5,\n        tickPadding: 5,\n        tickRotation: 0,\n        legend: \"Dollars\",\n        legendOffset: -40,\n        legendPosition: \"middle\"\n      }}\n      axisBottom={{\n        format: \"%b %d\",\n        tickValues: \"every 2 days\",\n        legend: \"Time Scale\",\n        legendOffset: -12\n      }}\n      animate={true}\n      margin={\n        role === \"farmer\"\n          ? { top: 10, right: 20, bottom: 50, left: 60 }\n          : { top: 10, right: 90, bottom: 50, left: 60 }\n      }\n      enableSlices={isLoaded ? false : \"x\"}\n      lineWidth={3}\n      pointSize={12}\n      pointColor={\"#ffffff\"}\n      pointBorderWidth={2}\n      pointBorderColor={{ from: \"serieColor\" }}\n      pointLabel=\"y\"\n      pointLabelYOffset={-12}\n      useMesh={isLoaded}\n      legends={\n        role === \"caseworker\"\n          ? [\n              {\n                anchor: \"bottom-right\",\n                direction: \"column\",\n                justify: false,\n                translateX: 100,\n                translateY: 0,\n                itemsSpacing: 0,\n                itemDirection: \"left-to-right\",\n                itemWidth: 80,\n                itemHeight: 20,\n                itemOpacity: 0.75,\n                symbolSize: 12,\n                symbolShape: \"circle\",\n                symbolBorderColor: \"rgba(0, 0, 0, .5)\",\n                effects: [\n                  {\n                    on: \"hover\",\n                    style: {\n                      itemBackground: \"rgba(0, 0, 0, .03)\",\n                      itemOpacity: 1\n                    }\n                  }\n                ]\n              }\n            ]\n          : undefined\n      }\n    />\n  );\n}\n","import React, { useState, useEffect } from \"react\";\nimport { ResponsiveBar } from \"@nivo/bar\";\n\nexport default function BarGraph(props) {\n  const [charData, setCharData] = useState([]);\n\n  useEffect(() => {\n    setCharData(props.charData);\n  }, [props]);\n\n  return (\n    <ResponsiveBar\n      data={charData}\n      keys={[\"redeemed\", \"handedOut\", \"created\"]}\n      indexBy=\"organization\"\n      margin={{ top: 50, right: 130, bottom: 50, left: 60 }}\n      padding={0.3}\n      groupMode=\"grouped\"\n      colors={{ scheme: \"nivo\" }}\n      animate={true}\n      motionStiffness={90}\n      motionDamping={15}\n      borderColor={{ from: \"color\", modifiers: [[\"darker\", 1.6]] }}\n      axisTop={null}\n      axisRight={null}\n      axisBottom={{\n        tickSize: 5,\n        tickPadding: 5,\n        tickRotation: 0,\n        legend: \"Organization\",\n        legendPosition: \"middle\",\n        legendOffset: 32\n      }}\n      axisLeft={{\n        tickSize: 5,\n        tickPadding: 5,\n        tickRotation: 0,\n        legend: \"Dollars\",\n        legendPosition: \"middle\",\n        legendOffset: -40\n      }}\n      legends={[\n        {\n          dataFrom: \"keys\",\n          anchor: \"bottom-right\",\n          direction: \"column\",\n          justify: false,\n          translateX: 120,\n          translateY: 0,\n          itemsSpacing: 2,\n          itemWidth: 100,\n          itemHeight: 20,\n          itemDirection: \"left-to-right\",\n          itemOpacity: 0.85,\n          symbolSize: 20,\n          effects: [\n            {\n              on: \"hover\",\n              style: {\n                itemOpacity: 1\n              }\n            }\n          ]\n        }\n      ]}\n      labelSkipWidth={12}\n      labelSkipHeight={12}\n      labelTextColor={{ from: \"color\", modifiers: [[\"darker\", 1.6]] }}\n    />\n  );\n}\n","import React, { useState, useEffect } from \"react\";\nimport {\n  Grid,\n  Container,\n  Segment,\n  Statistic,\n  Header,\n  Icon,\n  Dropdown\n} from \"semantic-ui-react\";\nimport firebase from \"firebase/app\";\nimport LineGraph from \"./LineGraph\";\nimport BarGraph from \"./BarGraph\";\n\nexport default function Dashboard(props) {\n  const [charData, setCharData] = useState([]);\n  const [role, setRole] = useState(\"\");\n  const [isLoaded, setIsLoaded] = useState(false);\n  const [totalRedeemed, setTotalRedeemed] = useState(0);\n  const [totalHandedOut, setTotalHandedOut] = useState(0);\n  const [totalCreated, setTotalCreated] = useState(0);\n  const [dateView, setDateView] = useState(\"month\");\n\n  const options = [\n    {\n      key: \"this month\",\n      text: \"this month\",\n      value: \"month\",\n      content: \"this month\"\n    },\n    {\n      key: \"this year\",\n      text: \"this year\",\n      value: \"year\",\n      content: \"this year\"\n    },\n    {\n      key: \"all time\",\n      text: \"all time\",\n      value: \"all\",\n      content: \"all time\"\n    }\n  ];\n\n  useEffect(() => {\n    console.log(props.org);\n    setRole(props.role);\n    if (props.role === \"farmer\") {\n      handleFarmer();\n    } else if (props.role === \"admin\") {\n      handleAdmin();\n    } else if (props.role === \"caseworker\") {\n      handleCaseworker();\n    }\n  }, [props]);\n\n  function handleFarmer() {\n    let ref = firebase\n      .database()\n      .ref(\"vis1/\" + props.uid)\n      .orderByValue();\n    let firebaseDataArray = [];\n    ref.on(\"child_added\", snapshot => {\n      let value = snapshot.val();\n      let scanDay = new Date(value).toISOString().split(\"T\")[0];\n      console.log(scanDay);\n      var index = firebaseDataArray.findIndex(function(item, i) {\n        return item.x === scanDay;\n      });\n      if (firebaseDataArray.length === 0) {\n        firebaseDataArray.push({\n          x: scanDay,\n          y: 2\n        });\n      } else if (firebaseDataArray.length !== 0 && index === -1) {\n        firebaseDataArray.push({\n          x: scanDay,\n          y: firebaseDataArray[firebaseDataArray.length - 1][\"y\"] + 2\n        });\n      } else {\n        firebaseDataArray[index].y += 2;\n      }\n      if (firebaseDataArray.length > 3) {\n        setIsLoaded(true);\n      }\n      setCharData([\n        {\n          id: \"Redeemed\",\n          data: firebaseDataArray\n        }\n      ]);\n      setTotalRedeemed(firebaseDataArray[firebaseDataArray.length - 1].y);\n    });\n  }\n\n  function handleAdmin() {\n    let ref = firebase\n      .database()\n      .ref()\n      .child(\"vis2/\");\n\n    ref.on(\"value\", snapshot => {\n      // loop through each org\n      let firebaseDataArray = [];\n      let redCount = 0;\n      for (var org in snapshot.val()) {\n        let orgJSON = {};\n        orgJSON[\"organization\"] = org;\n        console.log(org);\n        let value = snapshot.val();\n        console.log(value[org]);\n        for (var scanType in value[org]) {\n          console.log(scanType);\n          let count = 0;\n          for (var id in value[org][scanType]) {\n            if (scanType == \"redeemed\") {\n              redCount += 2;\n            }\n            count++;\n          }\n          orgJSON[scanType] = count;\n        }\n        firebaseDataArray.push(orgJSON);\n      }\n      setCharData(firebaseDataArray);\n      setTotalRedeemed(redCount);\n      console.log(charData);\n    });\n  }\n\n  function handleCaseworker() {\n    let ref = firebase\n      .database()\n      .ref()\n      .child(\"vis2/\" + props.org)\n      .orderByValue();\n    ref.on(\"value\", snapshot => {\n      console.log(\"Organization:\" + props.org);\n      let array = [];\n      var startDay;\n      for (var key in snapshot.val()) {\n        let firebaseDataArray = [];\n        console.log(key);\n        let value = snapshot.val();\n        let dates = [];\n        for (var childKey in value[key]) {\n          console.log(\"DATE\" + JSON.stringify(value[key][childKey]));\n\n          dates.push(\n            new Date(value[key][childKey]).toISOString().split(\"T\")[0]\n          );\n        }\n        dates.sort(function(a, b) {\n          return new Date(a) - new Date(b);\n        });\n\n        if (key !== \"created\" && new Date(dates[0]) - new Date(startDay) > 0) {\n          firebaseDataArray.push({\n            x: startDay,\n            y: 0\n          });\n        }\n\n        for (var time in dates) {\n          let scanDay = dates[time];\n          if (key === \"created\" && time == 0) {\n            startDay = scanDay;\n            console.log(\"startDay:\" + startDay);\n          }\n\n          var index = firebaseDataArray.findIndex(function(item, i) {\n            return item.x === scanDay;\n          });\n          if (firebaseDataArray.length === 0) {\n            firebaseDataArray.push({\n              x: scanDay,\n              y: 2\n            });\n          } else if (firebaseDataArray.length !== 0 && index === -1) {\n            firebaseDataArray.push({\n              x: scanDay,\n              y: firebaseDataArray[firebaseDataArray.length - 1][\"y\"] + 2\n            });\n          } else {\n            firebaseDataArray[index].y += 2;\n          }\n        }\n\n        let newData = {\n          id: key,\n          data: firebaseDataArray\n        };\n        if (key === \"redeemed\") {\n          setTotalRedeemed(\n            firebaseDataArray[firebaseDataArray.length - 1][\"y\"]\n          );\n        }\n        array = [...array, newData];\n      }\n      console.log(array);\n      if (enoughData(array)) {\n        setIsLoaded(true);\n      }\n      setCharData(array);\n    });\n    console.log(charData);\n  }\n\n  function enoughData(arr) {\n    for (var i = 0, len = arr.length; i < len; i++) {\n      if (arr[i][\"data\"].length < 5) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  return (\n    <Container>\n      <Grid stackable centered>\n        <Grid.Row>\n          <Grid.Column width={12}>\n            <Segment raised style={{ height: \"700px\" }}>\n              {role === \"admin\" ? (\n                <BarGraph charData={charData} />\n              ) : (\n                <LineGraph\n                  charData={charData}\n                  role={role}\n                  isLoaded={isLoaded}\n                />\n              )}\n            </Segment>\n          </Grid.Column>\n          <Grid.Column width={4}>\n            <Segment raised padded centered>\n              <Statistic\n                style={{ margin: \"auto\" }}\n                label=\"Dollars Created\"\n                value={\"$90.00\"}\n              />\n            </Segment>\n            <Segment raised padded centered>\n              <Statistic\n                style={{ margin: \"auto\" }}\n                label=\"Dollars Redeemed\"\n                value={\"$\" + totalRedeemed + \".00\"}\n              />\n            </Segment>\n            <Segment raised padded centered>\n              <Header as=\"h4\">\n                <Icon name=\"calendar alternate outline\" />\n                <Header.Content>\n                  Displaying Data from{\" \"}\n                  <Dropdown\n                    inline\n                    header=\"Adjust time span\"\n                    options={options}\n                    defaultValue={options[0].value}\n                  />\n                </Header.Content>\n              </Header>\n            </Segment>\n          </Grid.Column>\n        </Grid.Row>\n      </Grid>\n    </Container>\n  );\n}\n","import React from \"react\";\nimport { HashRouter as Router, Switch, Route, Link } from \"react-router-dom\";\nimport BucksLanding from \"./BucksLanding\";\nimport constants from \"./constants\";\nimport firebase from \"firebase/app\";\nimport \"firebase/auth\";\nimport \"firebase/database\";\nimport Scan from \"./Scan\";\nimport ManageAccount from \"./ManageAccount\";\nimport FarmerPayout from \"./FarmerPayout\";\nimport CreateBucks from \"./CreateBucks.jsx\";\nimport {\n  Container,\n  Header,\n  Icon,\n  Label,\n  Menu,\n  Segment,\n  Responsive\n} from \"semantic-ui-react\";\nimport Dashboard from \"./Dashboard\";\n\n// const Title = styled.section`\n//   height: 220px;\n//   background-image: linear-gradient(to bottom right, #505c86, #404e67);\n// `;\n\n//const mql = window.matchMedia(`(min-width: 800px)`);\n\nexport default class MainView extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      role: \"\",\n      username: \"\",\n      org: \"\"\n      //sidebarDocked: mql.matches,\n      //sidebarOpen: false\n    };\n\n    //this.mediaQueryChanged = this.mediaQueryChanged.bind(this);\n    //this.onSetSidebarOpen = this.onSetSidebarOpen.bind(this);\n  }\n\n  handleOnUpdate = (e, { width }) => this.setState({ width });\n\n  handleSignOut = () => {\n    firebase\n      .auth()\n      .signOut()\n      .then(this.props.history.push(constants.routes.base));\n  };\n\n  componentWillMount() {\n    //mql.addListener(this.mediaQueryChanged);\n  }\n\n  componentWillUnmount() {\n    //mql.removeListener(this.mediaQueryChanged);\n  }\n\n  onSetSidebarOpen(open) {\n    //this.setState({ sidebarOpen: open });\n  }\n\n  mediaQueryChanged() {\n    //this.setState({ sidebarDocked: mql.matches, sidebarOpen: false });\n  }\n\n  // anton componentDidMount() -> useful for testing because you can still work if not approved\n  // componentDidMount() {\n  //   this.authUnsub = firebase.auth().onAuthStateChanged(user => {\n  //     if (!user) {\n  //       this.props.history.push(constants.routes.base);\n  //     } else {\n  //       firebase\n  //         .database()\n  //         .ref(\"users/\" + user.uid)\n  //         .once(\"value\")\n  //         .then(snapshot => {\n  //           var org = snapshot.val().org;\n  //           user.getIdTokenResult(true).then(idTokenResult => {\n  //             console.log(idTokenResult.claims.role);\n  //             if (idTokenResult.claims.role === \"caseworker\") {\n  //               this.setState({\n                  // username: user.email,\n                  // uid: user.uid,\n                  // role: idTokenResult.claims.role,\n                  // org: org\n  //               });\n  //             } else {\n  //               this.setState({\n  //                 username: user.email,\n  //                 uid: user.uid,\n  //                 role: idTokenResult.claims.role\n  //               });\n  //             }\n  //           });\n  //         });\n  //     }\n  //   });\n  // }\n\n  // august componentDidMount() -> does not allow people to route around\n  componentDidMount() {\n    this.authUnsub = firebase.auth().onAuthStateChanged(user => {\n      if(!user) {\n        this.props.history.push(constants.routes.base);\n      } else { //they are authenticated\n        user.getIdTokenResult().then(idTokenResult => {\n          console.log(idTokenResult.claims.role)\n          if(!idTokenResult.claims.role) {\n            //their role is null\n            //push them to the barrier page\n            this.props.history.push(constants.routes.barrier);\n          } else {\n            //their role has been approved\n            firebase\n              .database()\n              .ref(\"users/\" + user.uid)\n              .once(\"value\")\n              .then(snapshot => {\n                var org = snapshot.val().org;\n                this.setState({\n                  username: user.email,\n                  uid: user.uid,\n                  role: idTokenResult.claims.role,\n                  org: org\n                });\n              })\n          }\n        })\n      }\n    })\n  }\n\n  render() {\n    let farmerNav = [\n      <Menu.Item\n        name=\"Scan\"\n        as={Link}\n        to={constants.routes.dash.base}\n        active={this.props.location.pathname === constants.routes.dash.base}\n      />,\n      <Menu.Item\n        name=\"View Data\"\n        as={Link}\n        to={constants.routes.dash.viewData}\n        active={this.props.location.pathname === constants.routes.dash.viewData}\n      />\n    ];\n\n    let cworkerNav = [\n      <Menu.Item\n        name=\"Scan\"\n        as={Link}\n        to={constants.routes.dash.base}\n        active={this.props.location.pathname === constants.routes.dash.base}\n      />,\n      <Menu.Item\n        name=\"View Data\"\n        as={Link}\n        to={constants.routes.dash.viewData}\n        active={this.props.location.pathname === constants.routes.dash.viewData}\n      />\n    ];\n\n    let adminNav = [\n      <Menu.Item\n        name=\"Create Bucks\"\n        as={Link}\n        to={constants.routes.dash.bucksLanding}\n        active={\n          this.props.location.pathname === constants.routes.dash.bucksLanding\n        }\n      />,\n      <Menu.Item\n        name=\"Manage Accounts\"\n        as={Link}\n        to={constants.routes.dash.manageAccount}\n        active={\n          this.props.location.pathname === constants.routes.dash.manageAccount\n        }\n      />,\n      <Menu.Item\n        name=\"View Data\"\n        as={Link}\n        to={constants.routes.dash.viewData}\n        active={this.props.location.pathname === constants.routes.dash.viewData}\n      />\n    ];\n\n    let bookkeeperNav = [\n      <Menu.Item\n        name=\"Farmer Payout\"\n        as={Link}\n        to={constants.routes.dash.farmerPayout}\n        active={\n          this.props.location.pathname === constants.routes.dash.farmerPayout\n        }\n      />\n    ];\n\n    let farmerUI = [\n      <Route\n        exact\n        path={constants.routes.dash.base}\n        render={() => <Scan role={this.state.role} userId={this.state.uid} />}\n      />,\n      <Route\n        path={constants.routes.dash.viewData}\n        render={() => (\n          <Dashboard\n            role={this.state.role}\n            uid={this.state.uid}\n            org={this.state.org}\n          />\n        )}\n      />\n    ];\n\n    let cworkerUI = [\n      <Route\n        exact\n        path={constants.routes.dash.base}\n        render={() => <Scan role={this.state.role} userId={this.state.uid} />}\n      />,\n      <Route\n        path={constants.routes.dash.viewData}\n        render={() => (\n          <Dashboard\n            role={this.state.role}\n            uid={this.state.uid}\n            org={this.state.org}\n          />\n        )}\n      />\n    ];\n\n    let adminUI = [\n      <Route\n        path={constants.routes.dash.bucksLanding}\n        render={() => <BucksLanding username={this.state.username} />}\n      />,\n      <Route\n        path={constants.routes.dash.manageAccount}\n        component={ManageAccount}\n      />,\n      <Route\n        path={constants.routes.dash.base}\n        render={() => (\n          <Dashboard\n            role={this.state.role}\n            uid={this.state.uid}\n            org={this.state.org}\n          />\n        )}\n      />,\n      <Route\n        path={constants.routes.dash.createBucks}\n        render={() => <CreateBucks username={this.state.username} />}\n      />\n    ];\n\n    let bookkeeperUI = [\n      <Route\n        path={constants.routes.dash.farmerPayout}\n        render={() => <FarmerPayout username={this.state.username} />}\n      />\n    ];\n\n    let ui;\n    let label;\n    let nav;\n    let isAdmin;\n\n    if (this.state.role === \"admin\") {\n      ui = adminUI;\n      nav = adminNav;\n      label = \"Food Access Partnership\";\n      isAdmin = true;\n    } else if (this.state.role === \"caseworker\") {\n      ui = cworkerUI;\n      nav = cworkerNav;\n      label = \"Partner Organization\";\n      isAdmin = false;\n    } else if (this.state.role === \"farmer\") {\n      ui = farmerUI;\n      nav = farmerNav;\n      label = \"Farmer\";\n      isAdmin = false;\n    } else if (this.state.role === \"bookkeeper\") {\n      ui = bookkeeperUI;\n      nav = bookkeeperNav;\n      label = \"Bookkeeper\";\n      isAdmin = false;\n    }\n\n    let title;\n\n    if (this.props.location.pathname === \"/dash\") {\n      title = \"Scan\";\n    } else if (this.props.location.pathname === \"/dash/manage\") {\n      title = \"Manage Accounts\";\n    } else if (this.props.location.pathname === \"/dash/BucksLanding\") {\n      title = \"Create a Buck Set\";\n    } else if (this.props.location.pathname === \"/dash/farmerPayout\") {\n      title = \"Farmer Payout\";\n    } else {\n      // TO CHANGE:\n      title = \"Visualizations\";\n    }\n\n    return (\n      <div>\n        {/* Regular Header */}\n        <Responsive\n          as={Segment}\n          clearing\n          minWidth={768}\n          basic\n          color=\"blue\"\n          inverted\n          padded=\"very\"\n        >\n          {/* <Segment basic color=\"blue\" inverted padded=\"very\"> */}\n          <Header\n            padded=\"very\"\n            size=\"huge\"\n            floated=\"left\"\n            inverted\n            color=\"white\"\n          >\n            {title}\n          </Header>\n\n          <Header floated=\"right\" inverted color=\"white\">\n            {this.state.username}\n            <Header.Subheader inverted color=\"white\">\n              <Label>\n                <Icon name=\"user\" /> {label}\n              </Label>\n            </Header.Subheader>\n          </Header>\n          {/* </Segment> */}\n        </Responsive>\n\n        {/* Mobile Header */}\n        <Responsive\n          as={Segment}\n          maxWidth={767}\n          basic\n          color=\"blue\"\n          inverted\n          padded=\"very\"\n        >\n          <Header padded=\"very\" size=\"huge\" inverted color=\"white\">\n            {title}\n            <Header.Subheader inverted color=\"white\">\n              {this.state.username}\n            </Header.Subheader>\n          </Header>\n\n          <Label>\n            <Icon name=\"user\" /> {label}\n          </Label>\n        </Responsive>\n\n        <Menu secondary stackable={isAdmin}>\n          {nav}\n          <Menu.Menu position=\"right\">\n            <Menu.Item name=\"logout\" onClick={this.handleSignOut} />\n          </Menu.Menu>\n        </Menu>\n\n        <Container>\n          <Router>\n            <Switch>{ui}</Switch>\n          </Router>\n        </Container>\n      </div>\n    );\n  }\n}\n","import React from \"react\";\nimport firebase from \"firebase/app\";\nimport constants from \"./constants\";\nimport { Grid, Header, Icon, Segment } from \"semantic-ui-react\";\nimport \"firebase/auth\";\nimport \"firebase/database\";\n\nexport default class Barrier extends React.Component {\n  componentDidMount() {\n    this.authUnsub = firebase.auth().onIdTokenChanged(user => {\n      if (user) {\n        console.log(\"user = \", { user });\n        user.getIdTokenResult(true).then(idTokenResult => {\n          console.log(\"idTokenResult\", idTokenResult.claims.role);\n          if (idTokenResult.claims.role) {\n            //push them on to the dashboard\n            this.props.history.push(constants.routes.dash.base);\n          }\n        });\n      } else {\n        console.log(\"user not defined\");\n      }\n    });\n    // firebase.auth().onIdTokenChanged()\n  }\n\n  render() {\n    return (\n      <Grid centered=\"true\">\n        <Grid.Column width={8} verticalAlign=\"middle\" textAlign=\"center\">\n          <Segment inverted color=\"olive\" className=\"barrierContainer\">\n            <Icon name=\"hand paper outline\" size=\"huge\" />\n            <Header\n              inverted\n              as=\"h1\"\n              content=\"Your account is pending approval.\"\n            />\n            <Header.Subheader>\n              Once your account is approved this page will automatically update.\n            </Header.Subheader>\n            <p>\n              Please contact foodaccesspartnership@vigavashon.org with account\n              inquiries.\n            </p>\n          </Segment>\n        </Grid.Column>\n      </Grid>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport \"./App.css\";\nimport { HashRouter as Router, Switch, Route } from \"react-router-dom\";\nimport constants from \"./components/constants\";\nimport \"firebase/auth\";\nimport \"firebase/database\";\nimport LogInActivity from \"./components/LogInActivity.jsx\";\nimport CreateAccount from \"./components/CreateAccount.jsx\";\nimport AccountRecovery from \"./components/AccountRecovery.jsx\";\nimport MainView from \"./components/MainView\";\nimport Barrier from \"./components/Barrier.jsx\";\n\nclass App extends Component {\n  // constructor(props) {\n  //   super(props)\n  //   this.state = {\n  //     user: undefined\n  //   }\n  // }\n\n  // componentDidMount() {\n  //   firebase.auth().onAuthStateChanged(user => {\n  //     if (!user) {\n  //       this.props.history.push(constants.routes.base)\n  //     } else {\n  //       this.setState({\n  //         user\n  //       })\n  //     }\n  //   });\n  // }\n\n  render() {\n    return (\n      <div className=\"App\">\n        <Router>\n          <Switch>\n            <Route\n              exact\n              path={constants.routes.base}\n              component={LogInActivity}\n            />\n            {/* {this.state.user && <Route path={constants.routes.base} component={MainView} />} */}\n            <Route path={constants.routes.dash.base} component={MainView} />\n            <Route\n              path={constants.routes.createAccount}\n              component={CreateAccount}\n            />\n            <Route\n              path={constants.routes.accountRecovery}\n              component={AccountRecovery}\n            />\n            <Route path={constants.routes.barrier} component={Barrier} />\n          </Switch>\n        </Router>\n      </div>\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport 'semantic-ui-css/semantic.min.css';\nimport firebase from 'firebase/app';\nimport 'firebase/auth';\nimport 'firebase/database';\n\n// Initialize Firebase\nvar config = {\n    apiKey: \"AIzaSyArFZbAeQ5YDelr8x-lChKbUvPvo2Z7GF8\",\n    authDomain: \"fapadmin-97af8.firebaseapp.com\",\n    databaseURL: \"https://fapadmin-97af8.firebaseio.com\",\n    projectId: \"fapadmin-97af8\",\n    storageBucket: \"fapadmin-97af8.appspot.com\",\n    messagingSenderId: \"766068690399\"\n};\n\nfirebase.initializeApp(config);\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.register();\n"],"sourceRoot":""}