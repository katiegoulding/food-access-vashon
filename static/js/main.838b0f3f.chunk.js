(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{363:function(e,t,a){e.exports=a.p+"static/media/farmBuckEnglish.8e8b37b7.jpg"},364:function(e,t,a){e.exports=a.p+"static/media/farmBuckSpanish.c7d241e2.jpg"},366:function(e,t,a){e.exports=a.p+"static/media/bucktemplateprintpage.97cf9a86.jpg"},390:function(e,t,a){e.exports=a(660)},395:function(e,t,a){},396:function(e,t,a){},660:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(119),l=a.n(r),s=(a(395),a(25)),i=a(23),c=a(29),u=a(28),d=a(30),m=(a(396),a(688)),h=a(689),p=a(690),f={routes:{barrier:"/barrier",createAccount:"/signup",accountRecovery:"/recover",base:"/",dash:{base:"/dash",viewData:"/dash/ViewData",createBucks:"/dash/CreateBucks",bucksLanding:"/dash/BucksLanding",viewBucks:"/dash/ViewBucks",scan:"/dash/Scan",manageAccount:"/dash/manage",editAccount:"/dash/manage/edit",formSuccess:"/dash/formSuccess",farmerPayout:"/dash/farmerPayout"}},variables:{colors:{bodyBG:"#EFF0F3"}}},v=(a(55),a(56),a(673)),g=a(15),b=a.n(g),y=a(670),E=a(687),C=a(682),k=a(678),S=a(380),w=a(672),O=a(109),x=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleOnUpdate=function(e,t){var n=t.width;return a.setState({width:n})},a.state={email:"",pw:"",role:"",errorMessage:void 0,loading:!1},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.authUnsub=b.a.auth().onAuthStateChanged(function(t){t&&t.getIdTokenResult().then(function(t){console.log(t.claims.role),t.claims.role?e.props.history.push(f.routes.dash.base):e.props.history.push(f.routes.barrier)})})}},{key:"componentWillUnmount",value:function(){this.authUnsub()}},{key:"handleSignIn",value:function(e){var t=this;e.preventDefault(),this.setState({loading:!0}),b.a.auth().signInWithEmailAndPassword(this.state.email,this.state.pw).catch(function(e){return t.setState({errorMessage:e.message,loading:!1})})}},{key:"render",value:function(){var e=this,t=this.state,a=t.loading,n=t.errorMessage,r=this.state.width>=y.a.onlyTablet.minWidth?"6":"12";return o.a.createElement(y.a,{as:E.a,fireOnMount:!0,onUpdate:this.handleOnUpdate,centered:"true",middle:!0,columns:1},o.a.createElement(E.a.Column,{width:r,verticalAlign:"middle",textAlign:"left"},o.a.createElement(C.a,{attached:"top",header:"Welcome to our site!",content:"Sign in to access your account",className:"messageHeader loginIllustrations"}),o.a.createElement(k.a,{className:"attached fluid segment messageBody",onSubmit:function(t){return e.handleSignIn(t)},error:n,loading:a},o.a.createElement(C.a,{error:!0,header:n,content:"not logged in"}),o.a.createElement(k.a.Input,{required:!0,id:"email",label:"Email",placeholder:"Email",type:"email",value:this.state.email,onInput:function(t){return e.setState({email:t.target.value})},className:"LogInActivity-Input-Style"}),o.a.createElement(k.a.Input,{required:!0,id:"pw",label:"Password",placeholder:"Password",type:"password",value:this.state.pw,onInput:function(t){return e.setState({pw:t.target.value})},className:"LogInActivity-Input-Style"}),o.a.createElement(S.a,{type:"submit"},"Sign In"),o.a.createElement(w.a,{hidden:!0}),o.a.createElement(v.a,{to:f.routes.accountRecovery},"Forgot password?")),o.a.createElement(C.a,{attached:"bottom",className:"messageFooter",info:!0},o.a.createElement(O.a,{name:"help"}),"Don't have an account? \xa0",o.a.createElement(v.a,{to:f.routes.createAccount},"Sign Up"),"\xa0instead.")))}}]),t}(o.a.Component),D=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleOnUpdate=function(e,t){var n=t.width;return a.setState({width:n})},a.state={firstName:"",lastName:"",role:"",org:"",email:"",pw:"",pw_confirm:"",errorMessage:void 0},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.authUnsub=b.a.auth().onAuthStateChanged(function(t){t&&t.getIdTokenResult().then(function(t){console.log(t.claims.role),t.claims.role?e.props.history.push(f.routes.dash.base):e.props.history.push(f.routes.barrier)})})}},{key:"handleCreateAccount",value:function(e){var t=this;if(e.preventDefault(),this.setState({loading:!0}),"admin"!==this.state.role.toLowerCase()&&"bookkeeper"!==this.state.role.toLowerCase()||this.setState({org:"fap"}),this.state.pw!==this.state.pw_confirm)this.setState({errorMessage:"Passwords do not match",loading:!1});else{if(""===this.state.displayName)return void this.setState({errorMessage:"Enter Display Name",loading:!1});if(this.state.pw.length<6)return void this.setState({errorMessage:"Password must be at least six characters",loading:!1});b.a.auth().createUserWithEmailAndPassword(this.state.email,this.state.pw).then(function(e){try{return t.setState({loading:!0,errorMessage:""}),console.log("response = ",e),b.a.database().ref("/users/".concat(e.user.uid)).set({firstName:t.state.firstName,lastName:t.state.lastName,email:t.state.email,role:t.state.role,lastPayoutDate:"N/A",org:t.state.org,vouchersList:[],approved:!1})}catch(a){return console.log("err on write to db = ",a),t.setState({loading:!1,errorMessage:a.message})}}).catch(function(e){console.log("err on write to db = ",e),t.setState({loading:!1,errorMessage:e.message})})}}},{key:"render",value:function(){var e=this,t=[{key:"f",text:"Vashon Community Food Bank",value:"foodbank"},{key:"d",text:"The Dove Project",value:"dove"},{key:"c",text:"Vashon Community Care",value:"vcc"},{key:"s",text:"Vashon Senior Center",value:"seniorcenter"},{key:"i",text:"Interfaith Council to Prevent Homelessness",value:"interfaith"},{key:"m",text:"Community Meals",value:"communitymeals"},{key:"h",text:"Vashon Household",value:"vashonhousehold"},{key:"l",text:"La Comunidad & ECEAP",value:"lacomunidad"},{key:"y",text:"VYFS",value:"vyfs"},{key:"x",text:"VYFS: Latinx",value:"vyfslatinx"},{key:"p",text:"VYFS: Family Place",value:"vyfsfamily"}],a=this.state,n=a.loading,r=a.errorMessage,l=a.role,s=this.state.width>=y.a.onlyTablet.minWidth?"6":"12";return o.a.createElement(y.a,{as:E.a,fireOnMount:!0,onUpdate:this.handleOnUpdate,centered:"true",middle:!0,columns:1},o.a.createElement(E.a.Column,{width:s,verticalAlign:"middle",textAlign:"left",className:"mt100 mb100"},o.a.createElement(C.a,{attached:!0,header:"Create an Account",content:"Provide some basic information to get started!",className:"messageHeader loginIllustrations"}),o.a.createElement(k.a,{className:"attached fluid segment messageBody",onSubmit:function(t){return e.handleCreateAccount(t)},error:r,loading:n},o.a.createElement(C.a,{error:!0,header:"Account not created",content:r}),o.a.createElement(k.a.Input,{required:!0,label:"First Name",htmlFor:"firstName",id:"firstName",type:"text",className:"form-control",value:this.state.firstName,onInput:function(t){return e.setState({firstName:t.target.value})}}),o.a.createElement(k.a.Input,{required:!0,label:"Last Name",htmlFor:"lastName",id:"lastName",type:"text",className:"form-control",value:this.state.lastName,onInput:function(t){return e.setState({lastName:t.target.value})}}),o.a.createElement(k.a.Select,{required:!0,label:"Role",htmlFor:"role",value:this.state.role,options:[{key:"f",text:"Farmer",value:"Farmer"},{key:"c",text:"Caseworker",value:"Caseworker"},{key:"a",text:"Admin",value:"Admin"},{key:"b",text:"Bookkeeper",value:"Bookkeeper"}],onChange:function(t,a){e.setState({role:a.value})}}),function(){switch(l){case"Caseworker":return o.a.createElement(k.a.Select,{required:!0,label:"Affiliated Organization:",htmlFor:"organization",value:e.state.org,options:t,onChange:function(t,a){e.setState({org:a.value})}});case"Farmer":return o.a.createElement(k.a.Input,{required:!0,label:"Farm Name:",htmlFor:"organization",value:e.state.org,onInput:function(t){return e.setState({org:t.target.value})}});case"Admin":case"Bookkeeper":return o.a.createElement(k.a.Input,{label:"Affiliated Organization:",htmlFor:"organization",value:"Food Access Partnership",placeholder:"Food Access Partnership",readOnly:!0});default:return o.a.createElement("div",null)}}(),o.a.createElement(k.a.Input,{required:!0,id:"email",htmlFor:"email",label:"Email",type:"email",placeholder:"Enter your email address",value:this.state.email,onInput:function(t){return e.setState({email:t.target.value})}}),o.a.createElement(k.a.Input,{required:!0,id:"pw",htmlFor:"password",label:"Password",type:"password",placeholder:"Enter your password",value:this.state.pw,onInput:function(t){return e.setState({pw:t.target.value})}}),o.a.createElement(k.a.Input,{required:!0,id:"pw_confrim",htmlFor:"passwordConfirm",label:"Reenter Password",type:"password",placeholder:"confirm your password",value:this.state.pw_confirm,onInput:function(t){return e.setState({pw_confirm:t.target.value})}}),o.a.createElement(S.a,{type:"submit"},"Create Account")),o.a.createElement(C.a,{attached:"bottom",className:"messageFooter",info:!0},o.a.createElement(O.a,{name:"help"}),"Already have an account? \xa0",o.a.createElement(v.a,{to:f.routes.base},"Sign in!"),"\xa0")))}}]),t}(o.a.Component),j=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleOnUpdate=function(e,t){var n=t.width;return a.setState({width:n})},a.state={email:"",errorMessage:!1,successMessage:void 0},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.authUnsub=b.a.auth().onAuthStateChanged(function(t){e.setState({currentUser:t})})}},{key:"componentWillUnmount",value:function(){this.authUnsub()}},{key:"handlePasswordReset",value:function(e){var t=this,a=b.a.auth();this.setState({errorMessage:void 0}),a.sendPasswordResetEmail(this.state.email).then(this.setState({successMessage:!0,email:""})).catch(function(e){return t.setState({errorMessage:e.message})})}},{key:"render",value:function(){var e=this,t=this.state,a=t.width,n=t.successMessage,r=(t.email,a>=y.a.onlyTablet.minWidth?"6":"12");return o.a.createElement(y.a,{as:E.a,fireOnMount:!0,onUpdate:this.handleOnUpdate,centered:"true",middle:!0,columns:1},o.a.createElement(E.a.Column,{width:r,verticalAlign:"middle",textAlign:"left"},o.a.createElement(C.a,{attached:"top",header:"Account Recovery",content:"Enter your account email to reset your password.",className:"messageHeader"}),o.a.createElement(k.a,{className:"attached fluid segment messageBody",onSubmit:function(t){return e.handlePasswordReset(t)},warning:n},o.a.createElement(k.a.Input,{required:!0,id:"email",label:"Email",type:"email",placeholder:"Enter your email address",value:this.state.email,onInput:function(t){return e.setState({email:t.target.value})}}),o.a.createElement(S.a,{type:"submit",content:"Reset"}),o.a.createElement(C.a,{warning:!0,header:"Thank you",content:"If that account exists in our system, password reset steps will be sent"}))))}}]),t}(o.a.Component),A=a(71),P=a(680),B=a(197),I=a(674),N=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).showView=function(){return a.setState({viewModalOpen:!0})},a.open=function(){return a.setState({open:!0})},a.close=function(){return a.setState({open:!1})},a.deleteBuckSet=function(){var e=a.props.data.title;""!=e&&b.a.database().ref("buckSets/"+e).remove().then(function(){console.log("Remove succeeded."),a.setState({deleteModalOpen:!1})}).catch(function(e){console.log("Remove failed: "+e.message)});a.close()},a.viewBuckSet=function(){},a.state={viewModalOpen:!1,deleteModalOpen:!1},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.props.data,a=t.name,n=t.createdBy;return o.a.createElement(P.a,{fluid:!0},o.a.createElement(P.a.Content,null,o.a.createElement(P.a.Header,null,a),o.a.createElement(P.a.Meta,null,n)),o.a.createElement(P.a.Content,{extra:!0},o.a.createElement(B.a,{trigger:o.a.createElement(S.a,{primary:!0,content:"View"}),size:"small",open:this.viewModalOpen,onClose:this.close,closeIcon:!0},o.a.createElement(B.a.Header,null,'"',a,'" Buck Set'),o.a.createElement(B.a.Content,null,o.a.createElement("p",null,"Created by ",n),o.a.createElement("p",null,"More information about the selected buck set"))),o.a.createElement(S.a,{icon:"trash"}),o.a.createElement(I.a,{size:"small",header:"Are you sure you want to delete ".concat(a," Buck Set?"),content:"Doing so will mark all VIGA bucks generated for this set as inactive",cancelButton:"Cancel",confirmButton:"Delete",open:this.state.open,onCancel:this.close,onConfirm:function(){return e.deleteBuckSet()}})))}}]),t}(o.a.Component),M=a(675),R=a(685),L=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={firebaseBuckSet:[]},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=[],a=b.a.database().ref("buckSets");a.orderByChild("createdOn").on("child_added",function(a){var n=a.val();t.push({name:n.name,createdBy:n.createdBy}),e.setState({firebaseBuckSet:t})}),a.orderByChild("createdOn").on("child_removed",function(a){var n=a.val();t=t.filter(function(e){return!(e.title===n.name&&e.subtitle===n.createdBy)}),e.setState({firebaseBuckSet:t})})}},{key:"render",value:function(){return o.a.createElement(E.a.Column,{width:6},o.a.createElement(M.a,null,o.a.createElement(R.a,{as:"h2"},"Existing Buck Sets"),o.a.createElement(P.a.Group,null,this.state.firebaseBuckSet.map(function(e){return o.a.createElement(N,{key:e.name+e.createdBy,data:e})}))))}}]),t}(o.a.Component),F=a(50),U=a(33),z=a.n(U),V=a(106),H=(a(336),a(676)),T=a(684),W=a(363),q=a.n(W),Y=a(364),$=a.n(Y),G=a(124),_=a.n(G),J=a(191),K=a.n(J);_.a.vfs=K.a.pdfMake.vfs;var Q={Foodbank:"A-1",dove:"A-2",vcc:"A-3",seniorcenter:"A-4",interfaith:"A-5",vashonhousehold:"A-6",lacomunidad:"A-7",vyfs:"A-8"},X=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).validateFormData=function(){var e=Object(V.a)(z.a.mark(function e(t){var n,o,r;return z.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t<=0)){e.next=3;break}return a.setState({errorMessage:"Sum of vouchers in form must be greater than zero."}),e.abrupt("return",!1);case 3:return n=a.props.buckSetName,o=b.a.database().ref("buckSets"),r=!0,e.next=8,o.orderByChild("name").equalTo(n).once("value",function(e){e.forEach(function(e){e.key;e.val().name==n&&(a.setState({errorMessage:"The buck set name you used already exists."}),r=!1)})});case 8:return e.abrupt("return",r);case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.handleSubmit=function(){var e=Object(V.a)(z.a.mark(function e(t){var n,o,r,l,s,i,c,u,d,m,h,p;return z.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=a.props,o=n.doveCount,r=n.vyfsCount,l=n.lacomunidadCount,s=n.vashonhouseholdCount,a.setState({loading:!0}),i=o+r+l+s,e.next=6,a.validateFormData(i);case 6:if(e.sent){e.next=12;break}return a.setState({loading:!1}),e.abrupt("return");case 12:a.setState({errorMessage:""});case 13:b.a.database().ref().child("buckSets/"+a.props.buckSetName).update({name:a.props.buckSetName,createdOn:new Date,createdBy:a.props.username,expirationDate:a.props.expirationDate,foodbankCount:a.props.foodbankCount,doveCount:a.props.doveCount,communitycareCount:a.props.communitycareCount,seniorcenterCount:a.props.seniorcenterCount,interfaithCount:a.props.interfaithCount,communitymealsCount:a.props.communitymealsCount,vashonhouseholdCount:a.props.vashonhouseholdCount,lacomunidadCount:a.props.lacomunidadCount,vyfsCount:a.props.vyfsCount,vyfslatinxCount:a.props.vyfslatinxCount,vyfsfamilyplaceCount:a.props.vyfsfamilyplaceCount}).then(function(e){console.log("Buckset upload passed")}).catch(function(e){console.log("Buckset upload failed with: ",e)}),c=[],u=a.postVoucherData("dove",o,c),d=a.postVoucherData("vyfs",r,c),m=a.postVoucherData("lacomunidad",l,c),h=a.postVoucherData("vashonhousehold",s,c),p={expirationDate:a.props.expirationDate,ids:c},Promise.all([u,d,m,h]).then(function(e){a.toDataURL($.a,function(e){a.toDataURL(q.a,function(t){var n=a.createPDF(p,t,e);console.log(JSON.stringify(n)),_.a.createPdf(n).download(a.props.buckSetName+".pdf",function(){a.setState({complete:!0,loading:!1,errorMessage:""}),(0,a.props.toggleShowCreateBucks)()})})})}).catch(function(e){console.log("Error on firebase request",e),a.setState({errorMessage:"Error on firebase request"})}),console.log("firebase.functions() = ",b.a.functions());case 23:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.state={loading:!1,complete:!1,hasError:!1,errorMessage:""},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"toDataURL",value:function(e,t,a){var n=new Image;n.crossOrigin="Anonymous",n.onload=function(){var e,n=document.createElement("CANVAS"),o=n.getContext("2d");n.height=this.naturalHeight,n.width=this.naturalWidth,o.drawImage(this,0,0),e=n.toDataURL(a),t(e)},n.src=e,(n.complete||void 0===n.complete)&&(n.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==",n.src=e)}},{key:"createPDF",value:function(e,t,a){for(var n=e.ids,o=e.Year,r={content:[],pageSize:"LETTER"},l=1,s=0;s<n.length;s++){var i=n[s];console.log();var c=Q[i.partnerOrg],u=i.id,d=void 0,m={text:"Expires: "+o,absolutePosition:{x:395,y:s%4*198+141},fontSize:7,color:"white",bold:!0},h={text:o.split("-")[0],absolutePosition:{x:391,y:s%4*198+171},fontSize:4,color:"#5f605f",bold:!0},p={image:t,height:198,width:455,absolutePosition:{x:78.5,y:s%4*198}},f={text:c,absolutePosition:{x:386,y:s%4*198+158},fontSize:12,color:"#5f605f",bold:!0};r.content.push(p),r.content.push(m),r.content.push(f),r.content.push(h),l%4===0||l===n.length?(d={qr:u,fit:50,absolutePosition:{x:390,y:s%4*198+44},pageBreak:"after"},r.content.push(d),l%4===0?l===n.length?this.generateSpanishPage(r,a,4,!0):this.generateSpanishPage(r,a,4,!1):l===n.length?this.generateSpanishPage(r,a,l%4,!0):this.generateSpanishPage(r,a,l%4,!1)):(d={qr:u,fit:50,absolutePosition:{x:390,y:s%4*198+44}},r.content.push(d)),console.log(JSON.stringify(d)),l++}return r.pageMargins=[0,0,0,0],r}},{key:"generateSpanishPage",value:function(e,t,a,n){for(var o=0;o<a-1;o++){var r={image:t,height:198,width:455,absolutePosition:{x:78.5,y:o%4*198}};e.content.push(r)}n?e.content.push({image:t,height:198,width:455,absolutePosition:{x:78.5,y:198*(a-1)}}):e.content.push({image:t,height:198,width:455,absolutePosition:{x:78.5,y:198*(a-1)},pageBreak:"after"})}},{key:"postVoucherData",value:function(e,t,a){for(var n={},o=0;o<t;o++){var r={organization:e,createdOn:new Date,expirationDate:this.props.expirationDate},l=b.a.database().ref().child("vouchers").push().key;a.push({partnerOrg:e,id:l}),b.a.database().ref().child("vis2/"+e+"/created/").update(Object(F.a)({},l,new Date)),n["/vouchers/"+l]=r}return b.a.database().ref().update(n)}},{key:"render",value:function(){var e=this,t=this.state,a=t.loading,n=t.errorMessage,r=this.props.toggleShowCreateBucks,l=this.props.foodbankCount+this.props.doveCount+this.props.communitycareCount+this.props.seniorcenterCount+this.props.interfaithCount+this.props.communitymealsCount+this.props.vashonhouseholdCount+this.props.lacomunidadCount+this.props.vyfsCount+this.props.vyfslatinxCount+this.props.vyfsfamilyplaceCount;return o.a.createElement(E.a.Column,{width:8},o.a.createElement(H.a,{raised:!0},o.a.createElement(M.a,null,o.a.createElement(k.a,{onSubmit:r,loading:a,error:n},o.a.createElement(k.a.Input,{inline:!0,required:!0,fluid:!0,transparent:!0,size:"massive",placeholder:"Buck Set Name",value:this.props.buckSetName,onInput:function(t){return e.props.handleChange({buckSetName:t.target.value})}}),o.a.createElement(k.a.Input,{width:8,inline:!0,required:!0,fluid:!0,label:"Expiration Date",type:"date",value:this.props.expirationDate,onInput:function(t){return e.props.handleChange({expirationDate:t.target.value})}}),o.a.createElement(R.a,{as:"h5",color:"grey",textAlign:"left"},"BUCK ALLOCATION"),o.a.createElement(k.a.Input,{width:6,inline:!0,size:"mini",fluid:!0,label:"Vashon Community Food Bank",placeholder:0,type:"number",onInput:function(t){return e.props.handleChange({foodbankCount:Number(t.target.value)})},min:0}),o.a.createElement(k.a.Input,{width:6,inline:!0,size:"mini",fluid:!0,label:"DoVE",placeholder:0,type:"number",onInput:function(t){return e.props.handleChange({doveCount:Number(t.target.value)})},min:0}),o.a.createElement(k.a.Input,{width:6,inline:!0,size:"mini",fluid:!0,label:"Vashon Community Care",placeholder:0,type:"number",onInput:function(t){return e.props.handleChange({communitycareCount:Number(t.target.value)})},min:0}),o.a.createElement(k.a.Input,{width:6,inline:!0,size:"mini",fluid:!0,label:"Vashon Senior Center",placeholder:0,type:"number",onInput:function(t){return e.props.handleChange({seniorcenterCount:Number(t.target.value)})},min:0}),o.a.createElement(k.a.Input,{width:6,inline:!0,size:"mini",fluid:!0,label:"Interfaith Council to Prevent Homelessness",placeholder:0,type:"number",onInput:function(t){return e.props.handleChange({interfaithCount:Number(t.target.value)})},min:0}),o.a.createElement(k.a.Input,{width:6,inline:!0,size:"mini",fluid:!0,label:"Community Meals",placeholder:0,type:"number",onInput:function(t){return e.props.handleChange({communitymealsCount:Number(t.target.value)})},min:0}),o.a.createElement(k.a.Input,{width:6,inline:!0,size:"mini",fluid:!0,label:"Vashon Household",placeholder:0,type:"number",onInput:function(t){return e.props.handleChange({vashonhouseholdCount:Number(t.target.value)})},min:0}),o.a.createElement(k.a.Input,{width:6,inline:!0,size:"mini",fluid:!0,label:"La Communidad \\ ECEAP",placeholder:0,type:"number",onInput:function(t){return e.props.handleChange({lacomunidadCount:Number(t.target.value)})},min:0}),o.a.createElement(k.a.Input,{width:6,inline:!0,size:"mini",fluid:!0,label:"VYFS",placeholder:0,type:"number",onInput:function(t){return e.props.handleChange({vyfsCount:Number(t.target.value)})},min:0}),o.a.createElement(k.a.Input,{width:6,inline:!0,size:"mini",fluid:!0,label:"VYFS: Latinx",placeholder:0,type:"number",onInput:function(t){return e.props.handleChange({vyfslatinxCount:Number(t.target.value)})},min:0}),o.a.createElement(k.a.Input,{width:6,inline:!0,size:"mini",fluid:!0,label:"VYFS: Family Place",placeholder:0,type:"number",onInput:function(t){return e.props.handleChange({vyfsfamilyplaceCount:Number(t.target.value)})},min:0}),o.a.createElement(w.a,{hidden:!0}),o.a.createElement(T.a.Group,{widths:"two"},o.a.createElement(T.a,null,o.a.createElement(T.a.Value,null,1*l),o.a.createElement(T.a.Label,null,"VIGA Bucks")),o.a.createElement(T.a,null,o.a.createElement(T.a.Value,null,"$",2*l,".00"),o.a.createElement(T.a.Label,null,"Dollars"))),o.a.createElement(w.a,{hidden:!0}),o.a.createElement(S.a,{color:"blue"},"Next Step"),o.a.createElement(C.a,{error:!0,header:n,content:"form not submitted"})))))}}]),t}(o.a.Component),Z=a(366),ee=a.n(Z);_.a.vfs=K.a.pdfMake.vfs;var te=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleSubmit=function(){var e=Object(V.a)(z.a.mark(function e(t){var n,o,r,l,s,i,c,u,d,m,h,p,f,v,g,y,E,C;return z.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),n=a.props,o=n.foodbankCount,r=n.doveCount,l=n.communitycareCount,s=n.seniorcenterCount,i=n.interfaithCount,c=n.communitymealsCount,u=n.vashonhouseholdCount,d=n.lacomunidadCount,m=n.vyfsCount,h=n.vyfslatinxCount,p=n.vyfsfamilyplaceCount,a.setState({loading:!0}),o+r+l+s+i+c+u+d+m+h+p,b.a.database().ref().child("buckSets/"+a.props.buckSetName).update({name:a.props.buckSetName,createdOn:new Date,createdBy:a.props.username,expirationDate:a.props.expirationDate,foodbankCount:a.props.foodbankCount,doveCount:a.props.doveCount,communitycareCount:a.props.communitycareCount,seniorcenterCount:a.props.seniorcenterCount,interfaithCount:a.props.interfaithCount,communitymealsCount:a.props.communitymealsCount,vashonhouseholdCount:a.props.vashonhouseholdCount,lacomunidadCount:a.props.lacomunidadCount,vyfsCount:a.props.vyfsCount,vyfslatinxCount:a.props.vyfslatinxCount,vyfsfamilyplaceCount:a.props.vyfsfamilyplaceCount}).then(function(e){console.log("Buckset upload passed")}).catch(function(e){console.log("Buckset upload failed with: ",e)}),f=[],v=a.postVoucherData("dove",r,f),g=a.postVoucherData("vyfs",m,f),y=a.postVoucherData("lacomunidad",d,f),E=a.postVoucherData("vashonhousehold",u,f),C={expirationDate:a.props.expirationDate,ids:f},Promise.all([v,g,y,E]).then(function(e){var t=a.createPDF(C);a.toDataURL(ee.a,function(e){t.background=[{image:e,width:612,height:792}],console.log(JSON.stringify(t)),_.a.createPdf(t).download(a.props.buckSetName+".pdf",function(){a.setState({complete:!0,loading:!1,errorMessage:""}),(0,a.props.toggleShowCreateBucks)()})})}).catch(function(e){console.log("Error on firebase request",e),a.setState({errorMessage:"Error on firebase request"})}),console.log("firebase.functions() = ",b.a.functions());case 14:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.state={},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"postVoucherData",value:function(e,t,a){for(var n={},o=0;o<t;o++){var r={organization:e,createdOn:new Date,expirationDate:this.props.expirationDate},l=b.a.database().ref().child("vouchers").push().key;a.push({partnerOrg:e,id:l}),b.a.database().ref().child("vis2/"+e+"/created/").update(Object(F.a)({},l,new Date)),n["/vouchers/"+l]=r}return b.a.database().ref().update(n)}},{key:"createPDF",value:function(e){var t=e.ids,a=(e.expirationDate,{content:[]});a.content.pageSize="LETTER";var n=1;return t.forEach(function(e){console.log(e);e.partnerOrg;var o,r=e.id;o=n%4==0&&n!==t.length?{qr:r,fit:50,margin:[381,0,0,137],pageBreak:"after"}:n%4==1?{qr:r,fit:50,margin:[381,51,0,137]}:{qr:r,fit:50,margin:[381,0,0,137]},console.log(JSON.stringify(o)),a.content.push(o),n++}),a.pageMargins=[0,0,0,0],a}},{key:"render",value:function(){var e=this.props.foodbankCount+this.props.doveCount+this.props.communitycareCount+this.props.seniorcenterCount+this.props.interfaithCount+this.props.communitymealsCount+this.props.vashonhouseholdCount+this.props.lacomunidadCount+this.props.vyfsCount+this.props.vyfslatinxCount+this.props.vyfsfamilyplaceCount;return o.a.createElement(E.a.Column,{width:10},o.a.createElement(H.a,{raised:!0,style:{paddingTop:"30px",paddingRight:"40px",paddingLeft:"40px"}},o.a.createElement(R.a,{as:"h1",textAlign:"left"},"Success!",o.a.createElement(R.a.Subheader,null,'"',this.props.buckSetName,'" Buck Set Created')),o.a.createElement(R.a,{as:"h5",color:"grey",textAlign:"left"},"BUCK ALLOCATION"),o.a.createElement("table",{className:"ui very basic table"},o.a.createElement("tbody",null,o.a.createElement("tr",null,o.a.createElement("td",null,"Vashon Community Food Bank"),o.a.createElement("td",null,this.props.foodbankCount," bucks"),o.a.createElement("td",null,"$",2*this.props.foodbankCount,".00")),o.a.createElement("tr",null,o.a.createElement("td",null,"DoVE"),o.a.createElement("td",null,this.props.doveCount," bucks"),o.a.createElement("td",null,"$",2*this.props.doveCount,".00")),o.a.createElement("tr",null,o.a.createElement("td",null,"Vashon Community Care"),o.a.createElement("td",null,this.props.communitycareCount," bucks"),o.a.createElement("td",null,"$",2*this.props.communitycareCount,".00")),o.a.createElement("tr",null,o.a.createElement("td",null,"Vashon Senior Center"),o.a.createElement("td",null,this.props.seniorcenterCount," bucks"),o.a.createElement("td",null,"$",2*this.props.seniorcenterCount,".00")),o.a.createElement("tr",null,o.a.createElement("td",null,"Interfaith Council to Prevent Homelessness"),o.a.createElement("td",null,this.props.interfaithCount," bucks"),o.a.createElement("td",null,"$",2*this.props.interfaithCount,".00")),o.a.createElement("tr",null,o.a.createElement("td",null,"Community Meals"),o.a.createElement("td",null,this.props.communitymealsCount," bucks"),o.a.createElement("td",null,"$",2*this.props.communitymealsCount,".00")),o.a.createElement("tr",null,o.a.createElement("td",null,"Vashon Household"),o.a.createElement("td",null,this.props.vashonhouseholdCount," bucks"),o.a.createElement("td",null,"$",2*this.props.vashonhouseholdCount,".00")),o.a.createElement("tr",null,o.a.createElement("td",null,"La Communidad \\ ECEAP"),o.a.createElement("td",null,this.props.lacomunidadCount," bucks"),o.a.createElement("td",null,"$",2*this.props.lacomunidadCount,".00")),o.a.createElement("tr",null,o.a.createElement("td",null,"VYFS"),o.a.createElement("td",null,this.props.vyfsCount," bucks"),o.a.createElement("td",null,"$",2*this.props.vyfsCount,".00")),o.a.createElement("tr",null,o.a.createElement("td",null,"VYFS: Latinx"),o.a.createElement("td",null,this.props.vyfslatinxCount," bucks"),o.a.createElement("td",null,"$",2*this.props.vyfslatinxCount,".00")),o.a.createElement("tr",null,o.a.createElement("td",null,"VYFS: Family Place"),o.a.createElement("td",null,this.props.vyfsfamilyplaceCount," bucks"),o.a.createElement("td",null,"$",2*this.props.vyfsfamilyplaceCount,".00")))),o.a.createElement(R.a,{as:"h5",color:"grey",textAlign:"left"},"EXPIRATION DATE"),o.a.createElement("p",null,this.props.expirationDate),o.a.createElement(w.a,{hidden:!0}),o.a.createElement(T.a.Group,{widths:"two"},o.a.createElement(T.a,null,o.a.createElement(T.a.Value,null,1*e),o.a.createElement(T.a.Label,null,"VIGA Bucks")),o.a.createElement(T.a,null,o.a.createElement(T.a.Value,null,"$",2*e,".00"),o.a.createElement(T.a.Label,null,"Dollars"))),o.a.createElement(w.a,{hidden:!0}),o.a.createElement(S.a,{content:"Generate PDF for Print",onClick:this.handleSubmit})))}}]),t}(o.a.Component),ae=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={showCreateBucks:!0,buckSetName:"",foodbankCount:0,doveCount:0,communitycareCount:0,seniorcenterCount:0,interfaithCount:0,communitymealsCount:0,vashonhouseholdCount:0,lacomunidadCount:0,vyfsCount:0,vyfslatinxCount:0,vyfsfamilyplaceCount:0,expirationDate:""},a.handleChange=a.handleChange.bind(Object(A.a)(Object(A.a)(a))),a.toggleShowCreateBucks=a.toggleShowCreateBucks.bind(Object(A.a)(Object(A.a)(a))),a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"handleChange",value:function(e){this.setState(e)}},{key:"toggleShowCreateBucks",value:function(e){this.setState({showCreateBucks:!this.state.showCreateBucks})}},{key:"render",value:function(){return o.a.createElement(M.a,null,o.a.createElement(E.a,{stackable:!0,centered:!0},o.a.createElement(E.a.Row,null,this.state.showCreateBucks?o.a.createElement(X,{toggleShowCreateBucks:this.toggleShowCreateBucks,handleChange:this.handleChange,buckSetName:this.state.buckSetName,username:this.props.username,foodbankCount:this.state.foodbankCount,doveCount:this.state.doveCount,communitycareCount:this.state.communitycareCount,seniorcenterCount:this.state.seniorcenterCount,interfaithCount:this.state.interfaithCount,communitymealsCount:this.state.communitymealsCount,vashonhouseholdCount:this.state.vashonhouseholdCount,lacomunidadCount:this.state.lacomunidadCount,vyfsCount:this.state.vyfsCount,vyfslatinxCount:this.state.vyfslatinxCount,vyfsfamilyplaceCount:this.state.vyfsfamilyplaceCount,expirationDate:this.state.expirationDate}):o.a.createElement(te,{toggleShowCreateBucks:this.toggleShowCreateBucks,buckSetName:this.state.buckSetName,username:this.props.username,foodbankCount:this.state.foodbankCount,doveCount:this.state.doveCount,communitycareCount:this.state.communitycareCount,seniorcenterCount:this.state.seniorcenterCount,interfaithCount:this.state.interfaithCount,communitymealsCount:this.state.communitymealsCount,vashonhouseholdCount:this.state.vashonhouseholdCount,lacomunidadCount:this.state.lacomunidadCount,vyfsCount:this.state.vyfsCount,vyfslatinxCount:this.state.vyfslatinxCount,vyfsfamilyplaceCount:this.state.vyfsfamilyplaceCount,expirationDate:this.state.expirationDate}),o.a.createElement(L,null))))}}]),t}(o.a.Component),ne=a(249),oe=a.n(ne),re=a(686),le=a(677),se=a(365),ie=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleScan=function(e){e&&(console.log("data ",e),a.setState({loading:!0}),a.isValid(e)?b.a.database().ref("vouchers/").child(e).once("value",function(t){t.exists()?(console.log("This ID exists."),a.populateUserData(e),a.populateVisData(e)):a.setState({scanState:"scanError",loading:!1})}).catch(function(e){console.log("Firebase voucher lookup err:",e),a.setState({loading:!1})}):(console.log("bad path"),a.setState({invalidScan:!0,scanState:"scanError",loading:!1})))},a.delayedStopLoading=function(){setTimeout(function(){a.setState({loading:!1})},2e3)},a.populateVisData=function(){var e=Object(V.a)(z.a.mark(function e(t){var n,o;return z.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:console.log("In the populate data branch"),n=new Date,o=b.a.database().ref().child("vis1/"+a.props.userId),"farmer"===a.props.role?(o.update(Object(F.a)({},t,n)),b.a.database().ref("vouchers/"+t).once("value").then(function(e){var a=e.val().organization;b.a.database().ref().child("vis2/"+a+"/redeemed/").update(Object(F.a)({},t,n))})):"caseworker"===a.props.role&&b.a.database().ref("vouchers/"+t).once("value").then(function(e){var a=e.val().organization;b.a.database().ref().child("vis2/"+a+"/handedOut/").update(Object(F.a)({},t,n))});case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.populateUserData=function(e){var t="",n=b.a.database().ref("vouchers/"+e),o=b.a.database().ref("users/"+a.props.userId);if("farmer"===a.props.role)b.a.database().ref("vouchers/"+e+"/redeemedOn").once("value",function(r){if(r.val())console.log(".val() already exists, setting state to already redeemed"),t="alreadyRedeemed",a.setState({scanState:t},a.delayedStopLoading);else{var l=new Date;n.once("value",function(r){var s=new Date(r.val().expirationDate);l.getTime()<=s.getTime()?(n.update({redeemedOn:l}),o.child("vouchersList").update(Object(F.a)({},e,"notPaid")),console.log("in the success statement"),t="success"):(console.log("in the expired statement"),t="expiredFarmer"),a.setState({scanState:t},a.delayedStopLoading)})}});else if("caseworker"===a.props.role){b.a.database().ref("vouchers/"+e+"/handedOutOn").once("value",function(r){if(r.val())t="alreadyHanded",a.setState({scanState:t},a.delayedStopLoading);else{var l=new Date;n.once("value",function(r){var s=new Date(r.val().expirationDate);l.getTime()<=s.getTime()?(n.update({handedOutOn:l}),o.child("vouchersList").update(Object(F.a)({},e,"true")),console.log("in the success statement"),t="success"):(console.log("in the expired statement"),t="expiredCaseworker"),a.setState({scanState:t},a.delayedStopLoading)})}})}else a.setState({scanState:"accountIssue"},a.delayedStopLoading)},a.showResponseMessage=function(e){switch(e){case"success":return o.a.createElement(C.a,{positive:!0,attached:"bottom",icon:"thumbs up",header:"Success!",content:"This buck has been submitted! Feel free to recycle or keep for your records."});case"expiredFarmer":return o.a.createElement(C.a,{warning:!0,attached:"bottom",icon:"calendar times outline",header:"Expired",content:"You may still receive compensation, please submit to a FAP organizer in person."});case"alreadyRedeemed":return o.a.createElement(C.a,{negative:!0,attached:"bottom",icon:"x",header:"Previously submitted",content:"This buck has already been submitted."});case"scanError":return o.a.createElement(C.a,{warning:!0,attached:"bottom",icon:"frown",header:"Error scanning",content:"Make sure you have a valid buck, then try again."});case"alreadyHanded":return o.a.createElement(C.a,{negative:!0,attached:"bottom",icon:"x",header:"Previously handed out",content:'This buck has been "handed out" before, no need to scan again.'});case"accountIssue":return o.a.createElement(C.a,{warning:!0,attached:"bottom",icon:"!",header:"Error",content:"Your account does not support scanning."});case"expiredCaseworker":return o.a.createElement(C.a,{warning:!0,attached:"bottom",icon:"calendar times outline",header:"This buck is expired",content:"Please recycle this VIGA farm buck."});default:return o.a.createElement("div",null)}},a.handleError=function(e){console.error(e),a.setState({legacyMode:!0})},a.state={legacyMode:!1,invalidScan:!1,scanState:"",qrCode:"",loading:!1},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"isValid",value:function(e){return/[^.#$[\]]/.test(e)}},{key:"render",value:function(){var e,t=this.state,a=t.scanState,n=t.loading;return e=this.state.legacyMode?o.a.createElement(oe.a,{delay:3e3,onError:this.handleError,onScan:this.handleScan,legacyMode:!0}):o.a.createElement(oe.a,{delay:3e3,onError:this.handleError,onScan:this.handleScan}),o.a.createElement("div",null,o.a.createElement(y.a,{as:E.a,centered:!0,minWidth:768},o.a.createElement(E.a.Row,null,o.a.createElement(H.a,{basic:!0},n&&o.a.createElement(re.a,{active:!0,inverted:!0},o.a.createElement(le.a,{size:"medium"})),!n&&this.showResponseMessage(a))),o.a.createElement(E.a.Row,null,o.a.createElement(E.a.Column,{width:6},o.a.createElement(H.a,null,e)),o.a.createElement(E.a.Column,{width:6},o.a.createElement(H.a,{basic:!0},o.a.createElement(R.a,{as:"h2"},"How to Scan"),o.a.createElement("p",null,"1. Make sure to allow this site to use your camera for scanning."),o.a.createElement("p",null,"2. Have your Farm Buck(s) in hand and center QR code in the camera view."),o.a.createElement("p",null,"3. You'll see a message informing you the scan is successful! Keep the buck for your records."))))),o.a.createElement(y.a,{as:M.a,fluid:!0,maxWidth:767},o.a.createElement(se.a,null,o.a.createElement(H.a,{attached:"top"},e),o.a.createElement(H.a,{basic:!0,attached:"bottom"},n&&o.a.createElement(re.a,{active:!0,inverted:!0},o.a.createElement(le.a,{size:"mini"})),!n&&this.showResponseMessage(a))),o.a.createElement(H.a,{basic:!0},o.a.createElement(R.a,{as:"h2"},"How to Scan"),o.a.createElement("p",null,"1. Make sure to allow this site to use your camera for scanning."),o.a.createElement("p",null,"2. Have your Farm Buck(s) in hand and center QR code in the camera view."),o.a.createElement("p",null,"3. You'll see a message informing you the scan is successful! Keep the buck for your records."))))}}]),t}(o.a.Component),ce=a(250),ue=a.n(ce),de=a(681),me=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).open=function(){console.log("in open function"),a.setState({open:!0})},a.close=function(){console.log("in close function"),a.setState({open:!1})},a.handleOnUpdate=function(e,t){var n=t.width;return a.setState({width:n})},a.state={role:""},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"handlePurge",value:function(){console.log("in purge function"),ue.a.functions().httpsCallable("deleteUser")({email:this.props.acctSnapshot.val().email}).then(function(e){console.log(e)}),this.props.acctRef.child(this.props.acctSnapshot.key).remove(),this.close()}},{key:"handleApprove",value:function(){var e=this.props.acctSnapshot.val();this.props.acctRef.child(this.props.acctSnapshot.key).update({approved:!0}),ue.a.functions().httpsCallable("changeRole")({email:e.email,role:e.role}).then(function(e){console.log(e)})}},{key:"render",value:function(){var e,t=this,a=this.props.acctSnapshot.val();e=a.approved?o.a.createElement(de.a.Cell,null,o.a.createElement(O.a,{name:"checkmark"}),"Approved"):o.a.createElement(de.a.Cell,null,o.a.createElement(O.a,{name:"attention"}),"Requires Approval");var n=this.state.width>=y.a.onlyComputer.minWidth?"center":"left";return o.a.createElement(y.a,{as:de.a.Row,warning:!a.approved,collapsing:!0,fireOnMount:!0,onUpdate:this.handleOnUpdate},o.a.createElement(de.a.Cell,null,o.a.createElement(R.a,{as:"h4"},o.a.createElement(R.a.Content,null,a.firstName," ",a.lastName,o.a.createElement(R.a.Subheader,null,a.org)))),o.a.createElement(de.a.Cell,null,a.role),o.a.createElement(de.a.Cell,null,a.email),e,o.a.createElement(de.a.Cell,{textAlign:n},a.approved?null:o.a.createElement(S.a.Group,null,o.a.createElement(S.a,{compact:!0,size:"mini",positive:!0,content:"Approve",onClick:function(){return t.handleApprove()}}),o.a.createElement(S.a,{compact:!0,size:"mini",content:"Reject",onClick:function(){return t.handlePurge()}}))),o.a.createElement(de.a.Cell,{textAlign:n},o.a.createElement(O.a,{name:"delete",className:"delete",size:"large",onClick:this.open}),o.a.createElement(I.a,{size:"small",header:"Are you sure?",content:"Are you sure you want to delete the account of ".concat(a.firstName," ").concat(a.lastName,"? This action cannot be undone"),cancelButton:"Cancel",confirmButton:"Delete Account",open:this.state.open,onCancel:this.close,onConfirm:function(){return t.handlePurge()}})))}}]),t}(o.a.Component),he=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={accountSnapshot:void 0},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentWillReceiveProps",value:function(e){var t=this;this.props.accountRef.off("value",this.unlisten),this.unlisten=e.accountRef.on("value",function(e){return t.setState({accountSnapshot:e})})}},{key:"componentDidMount",value:function(){var e=this;this.unlisten=this.props.accountRef.on("value",function(t){return e.setState({accountSnapshot:t})})}},{key:"componentWillUnmount",value:function(){this.props.accountRef.off("value",this.unlisten)}},{key:"render",value:function(){var e=this;if(!this.state.accountSnapshot)return o.a.createElement("div",null,o.a.createElement(H.a,null,o.a.createElement(re.a,{active:!0,inverted:!0},o.a.createElement(le.a,{indeterminate:!0},"Loading Accounts"))));var t=[];return this.state.accountSnapshot.forEach(function(a){e.props.user.email!==a.val().email&&t.push(o.a.createElement(me,{key:a.key,acctSnapshot:a,acctRef:e.props.accountRef}))}),o.a.createElement("div",null,o.a.createElement(y.a,{as:de.a,selectable:!0,minWidth:768},o.a.createElement(de.a.Header,null,o.a.createElement(de.a.Row,{collapsing:!0},o.a.createElement(de.a.HeaderCell,null,"Name"),o.a.createElement(de.a.HeaderCell,null,"Role"),o.a.createElement(de.a.HeaderCell,null,"Email"),o.a.createElement(de.a.HeaderCell,null,"Approval Status"),o.a.createElement(de.a.HeaderCell,{textAlign:"center"},"Actions"),o.a.createElement(de.a.HeaderCell,{textAlign:"center"},"Delete Account"))),o.a.createElement(de.a.Body,null,t)),o.a.createElement(y.a,{as:de.a,size:"mini",compact:"small",maxWidth:767},o.a.createElement(de.a.Header,null,o.a.createElement(de.a.Row,{collapsing:!0},o.a.createElement(de.a.HeaderCell,null,"Name"),o.a.createElement(de.a.HeaderCell,null,"Role"),o.a.createElement(de.a.HeaderCell,null,"Email"),o.a.createElement(de.a.HeaderCell,null,"Approval Status"),o.a.createElement(de.a.HeaderCell,null,"Delete Account"))),o.a.createElement(de.a.Body,null,t)))}}]),t}(o.a.Component),pe=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={value:"",filter:"",name:"",org:"",role:"",date_added:"",errorMessage:void 0},a.handleChange=a.handleChange.bind(Object(A.a)(Object(A.a)(a))),a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.authUnsub=b.a.auth().onAuthStateChanged(function(t){e.setState({currentUser:t}),null===e.state.currentUser&&e.props.history.push(f.routes.base)})}},{key:"componentWillUnmount",value:function(){this.authUnsub()}},{key:"handleChange",value:function(e){this.setState({value:e.target.value})}},{key:"render",value:function(){var e=b.a.database().ref("/users/");return o.a.createElement(H.a,{raised:!0},o.a.createElement(he,{user:this.state.currentUser,accountRef:e}))}}]),t}(o.a.Component),fe=a(140),ve=a(195),ge=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).listenForUpdates=function(){b.a.database().ref("users").on("child_changed",function(e){a.loadPayoutRecords()})},a.loadPayoutRecords=function(){var e=[];b.a.database().ref("/users/").once("value",function(t){t.forEach(function(t){var a=t.val().role.toLowerCase(),n=t.val().approved.toString().toLowerCase(),o=0,r=0;if(t.val().vouchersList){var l=t.val().vouchersList;Object.keys(l).forEach(function(e){o++,"notpaid"===l[e].toLowerCase()&&r++})}"farmer"===a&&"true"===n&&e.push({name:t.val().firstName+" "+t.val().lastName,farmerUid:t.key,farm:t.val().org,email:t.val().email,totalBucks:o,bucksNotPaid:r,lastPayoutDate:t.val().lastPayoutDate})}),a.setState({farmerList:e})}),console.log("after set state, farmerList: ",e)},a.open=function(){return a.setState({open:!0})},a.close=function(){return a.setState({open:!1})},a.completePayout=function(e){console.log("farmerUid",e),b.a.database().ref("users/"+e+"/vouchersList").on("value",function(t){t.forEach(function(t){var a=t.key;console.log("key",a),b.a.database().ref("users/"+e+"/vouchersList").update(Object(F.a)({},a,"paid"))});var a=new Date,n=a.getMonth()+1+"/"+a.getDate()+"/"+a.getFullYear();console.log("prettyDate: ",n),b.a.database().ref("users/"+e).update({lastPayoutDate:n})}),a.close()},a.state={farmerList:[],paidUp:!1},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.authUnsub=b.a.auth().onAuthStateChanged(function(t){e.setState({currentUser:t}),e.state.currentUser||e.props.history.push(f.routes.base)}),this.loadPayoutRecords(),this.listenForUpdates()}},{key:"componentWillUnmount",value:function(){this.authUnsub()}},{key:"handleChange",value:function(e){this.setState({value:e.target.value})}},{key:"render",value:function(){var e=this,t=this.state.farmerList;return console.log("farmerList: ",t),o.a.createElement(H.a,{raised:!0},o.a.createElement(R.a,{textAlign:"center",as:"h3"},"Farmer Payout Records"),o.a.createElement(y.a,{as:de.a,minWidth:1024,singleLine:!0,selectable:!0,stackable:!0},o.a.createElement(de.a.Header,null,o.a.createElement(de.a.Row,null,o.a.createElement(de.a.HeaderCell,null,"Name"),o.a.createElement(de.a.HeaderCell,null,"Farm"),o.a.createElement(de.a.HeaderCell,null,"Email"),o.a.createElement(de.a.HeaderCell,{collapsing:!0},"Total Bucks Collected"),o.a.createElement(de.a.HeaderCell,{collapsing:!0},"Outstanding Bucks"),o.a.createElement(de.a.HeaderCell,{collapsing:!0},"Last Payout Date"))),o.a.createElement(de.a.Body,null,t.map(function(t){return console.log("element: ",t),o.a.createElement(fe.a,null,o.a.createElement(de.a.Cell,null,t.name),o.a.createElement(de.a.Cell,null,t.farm),o.a.createElement(de.a.Cell,null,t.email),o.a.createElement(de.a.Cell,null,t.totalBucks),o.a.createElement(de.a.Cell,null,0===t.bucksNotPaid?o.a.createElement(S.a,{compact:!0,basic:!0,color:"green"},o.a.createElement(O.a,{color:"green",name:"checkmark",size:"small"}),"All Paid Up!"):o.a.createElement(S.a,{as:"div",labelPosition:"left"},o.a.createElement(ve.a,{basic:!0,as:"a",pointing:"right"},t.bucksNotPaid," Bucks / $",2*t.bucksNotPaid,".00"),o.a.createElement(S.a,{color:"green",icon:!0,onClick:e.open},o.a.createElement(O.a,{name:"dollar sign"}),"Mark as Paid"),o.a.createElement(I.a,{size:"small",header:"Confirm Payout?",content:"This will mark (".concat(t.bucksNotPaid,") unpaid bucks as PAID for ").concat(t.name," at ").concat(t.farm),cancelButton:"Cancel",confirmButton:"Mark as paid",open:e.state.open,onCancel:e.close,onConfirm:function(){return e.completePayout(t.farmerUid)}}))),o.a.createElement(de.a.Cell,null,t.lastPayoutDate))}))),o.a.createElement(y.a,{as:de.a,maxWidth:1023,compact:"very",singleLine:!0,selectable:!0,stackable:!0},o.a.createElement(de.a.Header,null,o.a.createElement(de.a.Row,null,o.a.createElement(de.a.HeaderCell,null,"Name"),o.a.createElement(de.a.HeaderCell,null,"Email"),o.a.createElement(de.a.HeaderCell,{collapsing:!0},"Total Bucks Collected"),o.a.createElement(de.a.HeaderCell,{collapsing:!0},"Outstanding Bucks"),o.a.createElement(de.a.HeaderCell,{collapsing:!0},"Last Payout Date"))),o.a.createElement(de.a.Body,null,t.map(function(t){return console.log("element: ",t),o.a.createElement(fe.a,null,o.a.createElement(de.a.Cell,null,o.a.createElement(R.a,{as:"h4"},o.a.createElement(R.a.Content,null,t.name,o.a.createElement(R.a.Subheader,null,t.farm)))),o.a.createElement(de.a.Cell,null,t.email),o.a.createElement(de.a.Cell,null,t.totalBucks),o.a.createElement(de.a.Cell,null,0===t.bucksNotPaid?o.a.createElement(S.a,{compact:!0,basic:!0,color:"green",size:"mini"},o.a.createElement(O.a,{color:"green",name:"checkmark",size:"small"}),"All Paid Up!"):o.a.createElement(S.a,{as:"div",labelPosition:"left"},o.a.createElement(ve.a,{basic:!0,as:"a",pointing:"right"},t.bucksNotPaid," Bucks / $",2*t.bucksNotPaid,".00"),o.a.createElement(S.a,{color:"green",icon:!0,onClick:e.open},o.a.createElement(O.a,{name:"dollar sign"}),"Mark as Paid"),o.a.createElement(I.a,{size:"small",header:"Confirm Payout?",content:"This will mark (".concat(t.bucksNotPaid,") unpaid bucks as PAID for ").concat(t.name," at ").concat(t.farm),cancelButton:"Cancel",confirmButton:"Mark as paid",open:e.state.open,onCancel:e.close,onConfirm:function(){return e.completePayout(t.farmerUid)}}))),o.a.createElement(de.a.Cell,null,t.lastPayoutDate))}))))}}]),t}(o.a.Component),be=a(683),ye=a(193),Ee=a(31),Ce=a(679),ke=a(369);function Se(e){var t=Object(n.useState)([]),a=Object(Ee.a)(t,2),r=a[0],l=a[1],s=Object(n.useState)(""),i=Object(Ee.a)(s,2),c=i[0],u=i[1],d=Object(n.useState)(!1),m=Object(Ee.a)(d,2),h=m[0],p=m[1];return Object(n.useEffect)(function(){u(e.role),l(e.charData),p(e.isLoaded)},[e]),o.a.createElement(ke.a,{data:r,colors:{scheme:"nivo"},xScale:{type:"time",format:"%Y-%m-%d",precision:"day"},xFormat:"time: %Y-%m-%d",curve:"monotoneX",yScale:{type:"linear",stacked:!1},axisLeft:{orient:"left",tickSize:5,tickPadding:5,tickRotation:0,legend:"Dollars",legendOffset:-40,legendPosition:"middle"},axisBottom:{format:"%b %d",tickValues:"every 2 days",legend:"Time Scale",legendOffset:-12},animate:!0,margin:"farmer"===c?{top:10,right:20,bottom:50,left:60}:{top:10,right:90,bottom:50,left:60},enableSlices:!h&&"x",lineWidth:3,pointSize:12,pointColor:"#ffffff",pointBorderWidth:2,pointBorderColor:{from:"serieColor"},pointLabel:"y",pointLabelYOffset:-12,useMesh:h,legends:"caseworker"===c?[{anchor:"bottom-right",direction:"column",justify:!1,translateX:100,translateY:0,itemsSpacing:0,itemDirection:"left-to-right",itemWidth:80,itemHeight:20,itemOpacity:.75,symbolSize:12,symbolShape:"circle",symbolBorderColor:"rgba(0, 0, 0, .5)",effects:[{on:"hover",style:{itemBackground:"rgba(0, 0, 0, .03)",itemOpacity:1}}]}]:void 0})}var we=a(375);function Oe(e){var t=Object(n.useState)([]),a=Object(Ee.a)(t,2),r=a[0],l=a[1];return Object(n.useEffect)(function(){l(e.charData)},[e]),o.a.createElement(we.a,{data:r,keys:["redeemed","handedOut","created"],indexBy:"organization",margin:{top:50,right:130,bottom:50,left:60},padding:.3,groupMode:"grouped",colors:{scheme:"nivo"},animate:!0,motionStiffness:90,motionDamping:15,borderColor:{from:"color",modifiers:[["darker",1.6]]},axisTop:null,axisRight:null,axisBottom:{tickSize:5,tickPadding:5,tickRotation:0,legend:"Organization",legendPosition:"middle",legendOffset:32},axisLeft:{tickSize:5,tickPadding:5,tickRotation:0,legend:"Dollars",legendPosition:"middle",legendOffset:-40},legends:[{dataFrom:"keys",anchor:"bottom-right",direction:"column",justify:!1,translateX:120,translateY:0,itemsSpacing:2,itemWidth:100,itemHeight:20,itemDirection:"left-to-right",itemOpacity:.85,symbolSize:20,effects:[{on:"hover",style:{itemOpacity:1}}]}],labelSkipWidth:12,labelSkipHeight:12,labelTextColor:{from:"color",modifiers:[["darker",1.6]]}})}function xe(e){var t=Object(n.useState)([]),a=Object(Ee.a)(t,2),r=a[0],l=a[1],s=Object(n.useState)(""),i=Object(Ee.a)(s,2),c=i[0],u=i[1],d=Object(n.useState)(!1),m=Object(Ee.a)(d,2),h=m[0],p=m[1],f=Object(n.useState)(0),v=Object(Ee.a)(f,2),g=v[0],y=v[1],C=Object(n.useState)(0),k=Object(Ee.a)(C,2),S=(k[0],k[1],Object(n.useState)(0)),w=Object(Ee.a)(S,2),x=(w[0],w[1],Object(n.useState)("month")),D=Object(Ee.a)(x,2),j=(D[0],D[1],[{key:"this month",text:"this month",value:"month",content:"this month"},{key:"this year",text:"this year",value:"year",content:"this year"},{key:"all time",text:"all time",value:"all",content:"all time"}]);return Object(n.useEffect)(function(){console.log(e.org),u(e.role),"farmer"===e.role?function(){var t=b.a.database().ref("vis1/"+e.uid).orderByValue(),a=[];t.on("child_added",function(e){var t=e.val(),n=new Date(t).toISOString().split("T")[0];console.log(n);var o=a.findIndex(function(e,t){return e.x===n});0===a.length?a.push({x:n,y:2}):0!==a.length&&-1===o?a.push({x:n,y:a[a.length-1].y+2}):a[o].y+=2,a.length>3&&p(!0),l([{id:"Redeemed",data:a}]),y(a[a.length-1].y)})}():"admin"===e.role?b.a.database().ref().child("vis2/").on("value",function(e){var t=[],a=0;for(var n in e.val()){var o={};o.organization=n,console.log(n);var s=e.val();for(var i in console.log(s[n]),s[n]){console.log(i);var c=0;for(var u in s[n][i])"redeemed"==i&&(a+=2),c++;o[i]=c}t.push(o)}l(t),y(a),console.log(r)}):"caseworker"===e.role&&(b.a.database().ref().child("vis2/"+e.org).orderByValue().on("value",function(t){console.log("Organization:"+e.org);var a,n=[];for(var o in t.val()){var r=[];console.log(o);var s=t.val(),i=[];for(var c in s[o])console.log("DATE"+JSON.stringify(s[o][c])),i.push(new Date(s[o][c]).toISOString().split("T")[0]);i.sort(function(e,t){return new Date(e)-new Date(t)}),"created"!==o&&new Date(i[0])-new Date(a)>0&&r.push({x:a,y:0});var u=function(){var e=i[d];"created"===o&&0==d&&(a=e,console.log("startDay:"+a)),m=r.findIndex(function(t,a){return t.x===e}),0===r.length?r.push({x:e,y:2}):0!==r.length&&-1===m?r.push({x:e,y:r[r.length-1].y+2}):r[m].y+=2};for(var d in i){var m;u()}var h={id:o,data:r};"redeemed"===o&&y(r[r.length-1].y),n=[].concat(Object(ye.a)(n),[h])}console.log(n),function(e){for(var t=0,a=e.length;t<a;t++)if(e[t].data.length<5)return!1;return!0}(n)&&p(!0),l(n)}),console.log(r))},[e]),o.a.createElement(M.a,null,o.a.createElement(E.a,{stackable:!0,centered:!0},o.a.createElement(E.a.Row,null,o.a.createElement(E.a.Column,{width:12},o.a.createElement(H.a,{raised:!0,style:{height:"700px"}},"admin"===c?o.a.createElement(Oe,{charData:r}):o.a.createElement(Se,{charData:r,role:c,isLoaded:h}))),o.a.createElement(E.a.Column,{width:4},o.a.createElement(H.a,{raised:!0,padded:!0,centered:!0},o.a.createElement(T.a,{style:{margin:"auto"},label:"Dollars Created",value:"$90.00"})),o.a.createElement(H.a,{raised:!0,padded:!0,centered:!0},o.a.createElement(T.a,{style:{margin:"auto"},label:"Dollars Redeemed",value:"$"+g+".00"})),o.a.createElement(H.a,{raised:!0,padded:!0,centered:!0},o.a.createElement(R.a,{as:"h4"},o.a.createElement(O.a,{name:"calendar alternate outline"}),o.a.createElement(R.a.Content,null,"Displaying Data from"," ",o.a.createElement(Ce.a,{inline:!0,header:"Adjust time span",options:j,defaultValue:j[0].value}))))))))}var De=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleOnUpdate=function(e,t){var n=t.width;return a.setState({width:n})},a.handleSignOut=function(){b.a.auth().signOut().then(a.props.history.push(f.routes.base))},a.state={role:"",username:"",org:""},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentWillMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"onSetSidebarOpen",value:function(e){}},{key:"mediaQueryChanged",value:function(){}},{key:"componentDidMount",value:function(){var e=this;this.authUnsub=b.a.auth().onAuthStateChanged(function(t){t?t.getIdTokenResult().then(function(a){console.log(a.claims.role),a.claims.role?b.a.database().ref("users/"+t.uid).once("value").then(function(n){var o=n.val().org;e.setState({username:t.email,uid:t.uid,role:a.claims.role,org:o})}):e.props.history.push(f.routes.barrier)}):e.props.history.push(f.routes.base)})}},{key:"render",value:function(){var e,t,a,n,r,l=this,s=[o.a.createElement(be.a.Item,{name:"Scan",as:v.a,to:f.routes.dash.base,active:this.props.location.pathname===f.routes.dash.base}),o.a.createElement(be.a.Item,{name:"View Data",as:v.a,to:f.routes.dash.viewData,active:this.props.location.pathname===f.routes.dash.viewData})],i=[o.a.createElement(be.a.Item,{name:"Scan",as:v.a,to:f.routes.dash.base,active:this.props.location.pathname===f.routes.dash.base}),o.a.createElement(be.a.Item,{name:"View Data",as:v.a,to:f.routes.dash.viewData,active:this.props.location.pathname===f.routes.dash.viewData})],c=[o.a.createElement(be.a.Item,{name:"Create Bucks",as:v.a,to:f.routes.dash.bucksLanding,active:this.props.location.pathname===f.routes.dash.bucksLanding}),o.a.createElement(be.a.Item,{name:"Manage Accounts",as:v.a,to:f.routes.dash.manageAccount,active:this.props.location.pathname===f.routes.dash.manageAccount}),o.a.createElement(be.a.Item,{name:"View Data",as:v.a,to:f.routes.dash.viewData,active:this.props.location.pathname===f.routes.dash.viewData})],u=[o.a.createElement(be.a.Item,{name:"Farmer Payout",as:v.a,to:f.routes.dash.farmerPayout,active:this.props.location.pathname===f.routes.dash.farmerPayout})],d=[o.a.createElement(p.a,{exact:!0,path:f.routes.dash.base,render:function(){return o.a.createElement(ie,{role:l.state.role,userId:l.state.uid})}}),o.a.createElement(p.a,{path:f.routes.dash.viewData,render:function(){return o.a.createElement(xe,{role:l.state.role,uid:l.state.uid,org:l.state.org})}})],g=[o.a.createElement(p.a,{exact:!0,path:f.routes.dash.base,render:function(){return o.a.createElement(ie,{role:l.state.role,userId:l.state.uid})}}),o.a.createElement(p.a,{path:f.routes.dash.viewData,render:function(){return o.a.createElement(xe,{role:l.state.role,uid:l.state.uid,org:l.state.org})}})],b=[o.a.createElement(p.a,{path:f.routes.dash.bucksLanding,render:function(){return o.a.createElement(ae,{username:l.state.username})}}),o.a.createElement(p.a,{path:f.routes.dash.manageAccount,component:pe}),o.a.createElement(p.a,{path:f.routes.dash.base,render:function(){return o.a.createElement(xe,{role:l.state.role,uid:l.state.uid,org:l.state.org})}}),o.a.createElement(p.a,{path:f.routes.dash.createBucks,render:function(){return o.a.createElement(X,{username:l.state.username})}})],E=[o.a.createElement(p.a,{path:f.routes.dash.farmerPayout,render:function(){return o.a.createElement(ge,{username:l.state.username})}})];return"admin"===this.state.role?(e=b,a=c,t="Food Access Partnership",n=!0):"caseworker"===this.state.role?(e=g,a=i,t="Partner Organization",n=!1):"farmer"===this.state.role?(e=d,a=s,t="Farmer",n=!1):"bookkeeper"===this.state.role&&(e=E,a=u,t="Bookkeeper",n=!1),r="/dash"===this.props.location.pathname?"Scan":"/dash/manage"===this.props.location.pathname?"Manage Accounts":"/dash/BucksLanding"===this.props.location.pathname?"Create a Buck Set":"/dash/farmerPayout"===this.props.location.pathname?"Farmer Payout":"Visualizations",o.a.createElement("div",null,o.a.createElement(y.a,{as:H.a,clearing:!0,minWidth:768,basic:!0,color:"blue",inverted:!0,padded:"very"},o.a.createElement(R.a,{padded:"very",size:"huge",floated:"left",inverted:!0,color:"white"},r),o.a.createElement(R.a,{floated:"right",inverted:!0,color:"white"},this.state.username,o.a.createElement(R.a.Subheader,{inverted:!0,color:"white"},o.a.createElement(ve.a,null,o.a.createElement(O.a,{name:"user"})," ",t)))),o.a.createElement(y.a,{as:H.a,maxWidth:767,basic:!0,color:"blue",inverted:!0,padded:"very"},o.a.createElement(R.a,{padded:"very",size:"huge",inverted:!0,color:"white"},r,o.a.createElement(R.a.Subheader,{inverted:!0,color:"white"},this.state.username)),o.a.createElement(ve.a,null,o.a.createElement(O.a,{name:"user"})," ",t)),o.a.createElement(be.a,{secondary:!0,stackable:n},a,o.a.createElement(be.a.Menu,{position:"right"},o.a.createElement(be.a.Item,{name:"logout",onClick:this.handleSignOut}))),o.a.createElement(M.a,null,o.a.createElement(m.a,null,o.a.createElement(h.a,null,e))))}}]),t}(o.a.Component),je=function(e){function t(){return Object(s.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.authUnsub=b.a.auth().onIdTokenChanged(function(t){t?(console.log("user = ",{user:t}),t.getIdTokenResult(!0).then(function(t){console.log("idTokenResult",t.claims.role),t.claims.role&&e.props.history.push(f.routes.dash.base)})):console.log("user not defined")})}},{key:"render",value:function(){return o.a.createElement(E.a,{centered:"true"},o.a.createElement(E.a.Column,{width:8,verticalAlign:"middle",textAlign:"center"},o.a.createElement(H.a,{inverted:!0,color:"olive",className:"barrierContainer"},o.a.createElement(O.a,{name:"hand paper outline",size:"huge"}),o.a.createElement(R.a,{inverted:!0,as:"h1",content:"Your account is pending approval."}),o.a.createElement(R.a.Subheader,null,"Once your account is approved this page will automatically update."),o.a.createElement("p",null,"Please contact foodaccesspartnership@vigavashon.org with account inquiries."))))}}]),t}(o.a.Component),Ae=function(e){function t(){return Object(s.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"App"},o.a.createElement(m.a,null,o.a.createElement(h.a,null,o.a.createElement(p.a,{exact:!0,path:f.routes.base,component:x}),o.a.createElement(p.a,{path:f.routes.dash.base,component:De}),o.a.createElement(p.a,{path:f.routes.createAccount,component:D}),o.a.createElement(p.a,{path:f.routes.accountRecovery,component:j}),o.a.createElement(p.a,{path:f.routes.barrier,component:je}))))}}]),t}(n.Component),Pe=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Be(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}a(659);b.a.initializeApp({apiKey:"AIzaSyArFZbAeQ5YDelr8x-lChKbUvPvo2Z7GF8",authDomain:"fapadmin-97af8.firebaseapp.com",databaseURL:"https://fapadmin-97af8.firebaseio.com",projectId:"fapadmin-97af8",storageBucket:"fapadmin-97af8.appspot.com",messagingSenderId:"766068690399"}),l.a.render(o.a.createElement(Ae,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/food-access-vashon",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("/food-access-vashon","/service-worker.js");Pe?(function(e,t){fetch(e).then(function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):Be(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")})):Be(t,e)})}}()}},[[390,1,2]]]);
//# sourceMappingURL=main.838b0f3f.chunk.js.map